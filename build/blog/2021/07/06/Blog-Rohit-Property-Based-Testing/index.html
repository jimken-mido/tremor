<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Property Based Testing of Tremor Script | Tremor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.tremor.rs/blog/2021/07/06/Blog-Rohit-Property-Based-Testing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Property Based Testing of Tremor Script | Tremor"><meta data-rh="true" name="description" content="Rohit&#x27;s Experience working with Tremor as a LFX Spring 2021 Mentee."><meta data-rh="true" property="og:description" content="Rohit&#x27;s Experience working with Tremor as a LFX Spring 2021 Mentee."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-07-06T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.linkedin.com/in/kurious-diru/"><meta data-rh="true" property="article:tag" content="testing,mentorship,cncf,tremorscript"><link data-rh="true" rel="icon" href="/static/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.tremor.rs/blog/2021/07/06/Blog-Rohit-Property-Based-Testing"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/blog/2021/07/06/Blog-Rohit-Property-Based-Testing" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/blog/2021/07/06/Blog-Rohit-Property-Based-Testing" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tremor RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tremor Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8fde9d3c.css">
<link rel="preload" href="/assets/js/runtime~main.0a24082e.js" as="script">
<link rel="preload" href="/assets/js/main.fe542851.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.tremor.rs/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/0.12/getting-started/">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" positition="left" href="/docs/0.12">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/0.12/guides/">Guides</a></li><li><a class="dropdown__link" href="/docs/0.12/reference/">Reference Documentation</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.12/">0.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/edge/">edge</a></li><li><a class="dropdown__link" href="/docs/0.12/">0.12</a></li><li><a class="dropdown__link" href="/docs/0.11/">0.11</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-0.12,docs-rfc-current"></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/24/LFX-Blog-Carol">Hygienic error handling and validation for pipelines</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/07/LFX-Blog-Sasha">Support for the ClickHouse database in Tremor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/15/tdengine-colaboration">TDengine colaboration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/03/LFX-Blog-Prashant">Automating the tremor release process</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/02/tremor-tremors">Tremors - May &#x27;22</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Property Based Testing of Tremor Script</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-07-06T00:00:00.000Z" itemprop="datePublished">July 6, 2021</time> Â· <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.linkedin.com/in/kurious-diru/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Rohit Dandamudi</span></a></div><small class="avatar__subtitle" itemprop="description">Tremor 2021 Spring Mentee</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">â€‹</a></h3><p>Hey, I am <a href="https://www.linkedin.com/in/kurious-diru/" target="_blank" rel="noopener noreferrer">Rohit Dandamudi</a> from India, about to complete my undergrad in CSE and will be working as a Software Engineer soon. I will be sharing my expereince at Tremor :)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-motivation-for-applying">Main motivation for applying<a href="#main-motivation-for-applying" class="hash-link" aria-label="Direct link to Main motivation for applying" title="Direct link to Main motivation for applying">â€‹</a></h3><p>My work involved writing &quot;Property-based tests for tremor-script&quot; and some of the reasons for applying are:</p><ul><li>It involved a new type of testing I never heard of</li><li>Be part of a sandbox project where I can learn and grow with the community</li><li>The concept of learning Erlang + Rust was very interesting to me and frankly out of my comfort zone, as a person used to Python and web development in general.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-concepts-i-learned-specific-to-my-work">New concepts I learned specific to my work<a href="#new-concepts-i-learned-specific-to-my-work" class="hash-link" aria-label="Direct link to New concepts I learned specific to my work" title="Direct link to New concepts I learned specific to my work">â€‹</a></h3><ul><li>Erlang and Rust<ul><li>My work mostly revolved around Erlang and a little Rust and I was completely new to this ecosystem, it didn&#x27;t help to not find much resources or actively accessible community for Erlang.</li><li>I took this as a challenge and went through <a href="https://github.com/diru1100/learn_erlang" target="_blank" rel="noopener noreferrer">various resources to learn Erlang</a>, functional programming in general and I was able to see why this Language was involved to do the task at hand, <a href="https://twitter.com/heinz_gies" target="_blank" rel="noopener noreferrer">my mentor</a> is very passionate about Erlang and shared his thought-process, experience which helped me broaden my knowledge and how to approach any concept while learning something completely new.</li></ul></li></ul><ul><li><p>Tremor-script</p><ul><li>It is an interpreted expression-oriented language designed for the filtering, extraction, transformation and streaming of structured data in a stream or event-based processing system which is explicitly turing incomplete used to write programs specific to Tremor use-cases.</li><li>It is written using Rust but tested using Erlang</li></ul></li><li><p>Property based testing</p><ul><li><p>We have seen various types of testing approaches like Unit testing, Integration testing, End2End testing etc.</p></li><li><p>The purpose of tests is to check if our code is failing anywhere and test the same with various inputs.</p></li><li><p>Fig 1 shows different types of tests to help understand which features are specialised in what.</p><p>  <img loading="lazy" src="/assets/images/tests-comparison-graph-84a1c4d9ca841172c69e84e7762a3e3f.png" width="379" height="368" class="img_ev3q"></p><p>  Fig 1. Showing various tests wrt Feature compilance and Input scope covered <!-- -->[1]</p></li><li><p>Property based testing takes a new appraoch which has the right balance of randomness and examples. They also have this nice feature of called shrinking which shows a simplified version of sample input which is failing your tests. However, Property based testing is not an ideal solution to use everywhere but it fits our use-case here i.e testing features of a custom-language.</p></li><li><p>Some of the resources I kept below may help understand Property based testing better</p></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="property-based-testing-in-tremor-script">Property Based testing in tremor-script<a href="#property-based-testing-in-tremor-script" class="hash-link" aria-label="Direct link to Property Based testing in tremor-script" title="Direct link to Property Based testing in tremor-script">â€‹</a></h3><ul><li><p>Property based testing is implemented using <a href="http://quviq.com/documentation/eqc/" target="_blank" rel="noopener noreferrer">EQC</a></p></li><li><p>Quickcheck is the original library written for Haskell to do property based testing ( similar to xUnit for unit-tests) and EQC is the Erlang version of it</p></li><li><p>Erlang quickcheck or EQC is the version used here</p><ul><li>Implemented by QuviQ</li><li>Free version is <a href="http://www.quviq.com/downloads/" target="_blank" rel="noopener noreferrer">quickcheck mini</a></li></ul></li><li><p>Components in Property based test</p><ul><li>Property is an abstraction of a test case</li><li>Properties are written in erlang in tremor</li></ul></li><li><p>The files shown in Fig 2 make the <a href="https://github.com/tremor-rs/tremor-runtime/tree/main/tremor-script/eqc" target="_blank" rel="noopener noreferrer">eqc part of Tremor</a></p><p>  <img loading="lazy" src="/assets/images/eqc-files-895a5c614b7b6e41f139c7b9531eb806.png" width="498" height="284" class="img_ev3q"></p><p>  Fig 2. Files related to eqc</p><ul><li><strong>gen_script:</strong> This file contains functions which create the structure of the expected expression for a partticular feature/operation that we will be testing in tremor-script</li><li><strong>model.erl:</strong> Here, we run the model specification of each operation implemented in Erlang natively.</li><li><strong>pbt.erl:</strong> Some supporting headers needed by other files</li><li><strong>spec.erl:</strong> We make use of EQC functions here to create the input generators to test a feature.</li><li><strong>test_eqc.erl:</strong> The main property of the property based test is kept here.</li><li><strong>util.erl:</strong> Utility functions to support operations for easier handling.</li></ul></li><li><p>On a high level Fig 3 explains how the property we consider is checked</p></li></ul><p><img loading="lazy" src="/assets/images/tremor-script-testing-workflow-f445d06e6edd4bdcd7386403fcced49f.png" width="2874" height="1874" class="img_ev3q"></p><p>Fig 3. Highlevel overview of Property based testing in termor-script</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-thought-process">Example thought process<a href="#example-thought-process" class="hash-link" aria-label="Direct link to Example thought process" title="Direct link to Example thought process">â€‹</a></h3><ul><li><p>Here, I will explain about property based testing by going through a step-by-step approach on how a Property based test is written for an operation in termor-script</p></li><li><p><a href="/blog/2021/07/06/docs/0.11/tremor-script/index#patch">Patch</a> is a operation in tremor-script that is performed on Expressions(everthing in tremor-script is an expression :p ) which contains multiple record(data-type) level field operations to be applied to a target record in order to transform a targetted record.</p></li><li><p>As patch has multiple operations inside it which have to be seperately created in every step, here is where the concept of incremental implementation comes into picture, if one makes sures if the PatchOperation is implemented before, we can take advantage of that here. For example: Merge is a seperate operation on records but it also is one of the patch operation.</p></li><li><p>gen_script.erl: The following code creates the structure needed for a patch operation as shown in Fig 4.</p><p>  <img loading="lazy" src="data:image/png;base64,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" width="477" height="81" class="img_ev3q"></p><p>  Fig 4. Diagram showing Patch operation <!-- -->[4]</p><div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">%% the input are &#x27;patch&#x27; keyword, an Expression </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">%% and the Operation to be performed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gen_({patch, Expr, PatchOperation}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    [&quot;(&quot;, &quot;patch &quot;, gen_(Expr), &quot; of &quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     lists:join(&quot;,&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        [[patch_operation(Operation)]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         || Operation &lt;- PatchOperation]),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     &quot; end&quot;, &quot;)&quot;];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>model.erl:</p><ul><li><p>One of the ast_eval function in this file matches with patch_operation where the following input is passed  <code>{patch, Expr, PatchOperation}</code>.</p></li><li><p>An anonymous function is there to update the PatchOperatoin into the respective structure needed for us to evaluate.</p></li><li><p>At the end we take advantage of floding in lists to implemente the Erlang implementation to get the required output.</p><div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">% Operations covered by the folowing patch_operation are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {merge, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {merge, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {insert, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {upsert, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {update, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {erase, Key}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">patch_operation({insert, Key, Value}, Acc) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    maps:put(Key, Value, Acc);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">patch_operation({merge, Key, Value}, Acc) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    maps:fold(fun combine_values/3, #{Key =&gt; Value}, Acc);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">patch_operation({upsert, Key, Value}, Acc) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    % does what we expect from upsert</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    maps:put(Key, Value, Acc);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">patch_operation({erase, Key}, Acc) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    maps:remove(Key, Acc).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-spec ast_eval(#vars{}, {}) -&gt; {#vars{},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                integer() | float() | boolean() | binary()}.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ast_eval(#vars{} = S, {patch, Expr, PatchOperation}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {_, ExprUpdate} = ast_eval(S, Expr),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    UpdatdPatchOperation = lists:map(fun ({erase, Key}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {erase, UpdatedKey};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     ({merge, Key}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {merge, UpdatedKey};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     ({insert, Key, Value}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedValue} = ast_eval(S,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                      Value),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {insert, UpdatedKey, UpdatedValue};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     ({upsert, Key, Value}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedValue} = ast_eval(S,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                      Value),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {upsert, UpdatedKey, UpdatedValue};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     ({update, Key, Value}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedValue} = ast_eval(S,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                      Value),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {update, UpdatedKey, UpdatedValue};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     ({merge, Key, Value}) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedKey} = ast_eval(S, Key),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {_, UpdatedValue} = ast_eval(S,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                      Value),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                         {merge, UpdatedKey, UpdatedValue};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     (X) -&gt; X</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     end,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     PatchOperation),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {S,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     lists:foldl(fun patch_operation/2, ExprUpdate,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         UpdatdPatchOperation)};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>spec.erl:</p><ul><li><p>The randomised input that we provide to test patch-feature comes from here, patch falls as a unary operation which can be performed on a records and has sub operations.</p></li><li><p>The randomisation is obtained by the frequency function we calls different generators.</p><div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">% Operations generated by patch_operation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {merge, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {merge, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {insert, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {upsert, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {update, Key, Value}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% {erase, Key}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">patch_operation(S, N) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    frequency([{1,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {insert, spec_inner_string(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         spec_inner_no_float(S, N - 1)}},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           {1,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {upsert, spec_inner_string(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         spec_inner_no_float(S, N - 1)}},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         {1,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {update, spec_inner_string(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         spec_inner_no_float(S, N - 1)}},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           {1,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        {merge, spec_inner_string(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         spec_inner_record(S, N - 1)}},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           {1, {erase, spec_inner_string(S, N - 1)}},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           {1, {merge, spec_inner_string(S, N - 1)}}]).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">% spec_uop_record function returns {patch, generated_record, patch_operations}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec_uop_record(S, N) when N =&lt; 1 -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ?SHRINK({patch, literal_record(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         ?SUCHTHAT(X, (list(1, patch_operation(S, N - 1))),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">               (length(X) &gt;= 1))},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        [literal_record(S, N - 1)]);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec_uop_record(S, N) -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ?SHRINK({patch, spec_inner_record(S, N - 1),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         ?SUCHTHAT(X, (list(1, patch_operation(S, N - 1))),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">               (length(X) &gt;= 1))},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        [spec_inner_record(S, N - 1)]). </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ending-thoughts-and-future-plans">Ending thoughts and future plans:<a href="#ending-thoughts-and-future-plans" class="hash-link" aria-label="Direct link to Ending thoughts and future plans:" title="Direct link to Ending thoughts and future plans:">â€‹</a></h3><p>All in all, I had/will have wonderful time at Tremor. Over the past 3-months I learned how to learn new tech-stack, got developer wisdom and understood what truely working as a team is. I want to thank Heinz, Matthias, Darach and Ana for making it fun, collaborative and inclusive environment. Although, I didn&#x27;t had a lot of knowledge in this area before, I am now confident I have the right mindset to pickup new things and grow together with the team.</p><p>I would like to continue contributing to the project and explore the rust part of it more. Apart from that I want to take more responsibilty, engage with new-comers and be part of other CNCF community events.</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-resources-i-compiled-while-going-through-the-mentorship-which-yall-might-find-useful-">Other resources I compiled while going through the mentorship which y&#x27;all might find useful ðŸ™‚<a href="#other-resources-i-compiled-while-going-through-the-mentorship-which-yall-might-find-useful-" class="hash-link" aria-label="Direct link to Other resources I compiled while going through the mentorship which y&#x27;all might find useful ðŸ™‚" title="Direct link to Other resources I compiled while going through the mentorship which y&#x27;all might find useful ðŸ™‚">â€‹</a></h3><ol><li><a href="https://medium.com/criteo-engineering/introduction-to-property-based-testing-f5236229d237" target="_blank" rel="noopener noreferrer">Introduction to Property Based Testing</a></li><li><a href="https://www.youtube.com/watch?v=QyJZzq0v7Z4" target="_blank" rel="noopener noreferrer">Why isn&#x27;t functional programming the norm</a></li><li><a href="https://github.com/kurious-diru/learn_rust" target="_blank" rel="noopener noreferrer">https://github.com/kurious-diru/learn_rust</a></li><li><a href="/blog/2021/07/06/docs/0.11/tremor-script/index#patch">Tremor script patch</a></li><li>Better to use tools: <ul><li><ul><li>cat - bat - <a href="https://github.com/sharkdp/bat" target="_blank" rel="noopener noreferrer">https://github.com/sharkdp/bat</a></li></ul></li><li><ul><li>grep - ripgrep - <a href="https://github.com/BurntSushi/ripgrep" target="_blank" rel="noopener noreferrer">https://github.com/BurntSushi/ripgrep</a></li></ul></li><li><ul><li>top - htop - <a href="https://github.com/hishamhm/htop" target="_blank" rel="noopener noreferrer">https://github.com/hishamhm/htop</a></li></ul></li><li><ul><li>hexdump - hexyl - <a href="https://github.com/sharkdp/hexyl" target="_blank" rel="noopener noreferrer">https://github.com/sharkdp/hexyl</a></li></ul></li></ul></li><li>Related to EQC:<ul><li><a href="https://www.erlang-factory.com/upload/presentations/19/quickchecktutorial_tartsjhughes.pdf" target="_blank" rel="noopener noreferrer">https://www.erlang-factory.com/upload/presentations/19/quickchecktutorial_tartsjhughes.pdf</a></li><li>Resources mentioned in this issue <a href="https://github.com/tremor-rs/tremor-runtime/issues/721" target="_blank" rel="noopener noreferrer">https://github.com/tremor-rs/tremor-runtime/issues/721</a></li></ul></li></ol></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/testing">testing</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mentorship">mentorship</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cncf">cncf</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tremorscript">tremorscript</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/tremor-rs/tremor-www/tree/main/blog/2021-07-06-Blog-Rohit-Property-Based-Testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2021/11/01/wayfair-case-studies"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Wayfair Case Study</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/LFX-Blog-Nupur"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Support for the Syslog Protocol</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#main-motivation-for-applying" class="table-of-contents__link toc-highlight">Main motivation for applying</a></li><li><a href="#new-concepts-i-learned-specific-to-my-work" class="table-of-contents__link toc-highlight">New concepts I learned specific to my work</a></li><li><a href="#property-based-testing-in-tremor-script" class="table-of-contents__link toc-highlight">Property Based testing in tremor-script</a></li><li><a href="#example-thought-process" class="table-of-contents__link toc-highlight">Example thought process</a></li><li><a href="#ending-thoughts-and-future-plans" class="table-of-contents__link toc-highlight">Ending thoughts and future plans:</a></li><li><a href="#other-resources-i-compiled-while-going-through-the-mentorship-which-yall-might-find-useful-" class="table-of-contents__link toc-highlight">Other resources I compiled while going through the mentorship which y&#39;all might find useful ðŸ™‚</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.tremor.rs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/TremorDEBS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UCg1hxwEjh9szpYg8SxL0U7Q" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
          Copyright Â© 2025, Tremor Authors | Documentation Distributed under CC-BY-4.0.<br><br>
              <p style="font-size: smaller;">Hosted by: <a href="https://www.netlify.com/" rel="noreferrer noopener" aria-label="Netlify"><img src="/img/netlify-full-logo.svg" alt="CNCF" style="width: 3%;"></a>
              &nbsp;&nbsp;&nbsp;&nbsp;
              Project of: <a href="https://www.cncf.io/" rel="noreferrer noopener" aria-label="CNCF"><img src="/img/cncf-color.svg" alt="CNCF" style="width: 5%;"></a></p>
        <small>Â© 2025 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.</small>
        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.0a24082e.js"></script>
<script src="/assets/js/main.fe542851.js"></script>
</body>
</html>