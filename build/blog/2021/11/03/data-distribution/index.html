<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Case Study - Data Distribution | Tremor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.tremor.rs/blog/2021/11/03/data-distribution"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Case Study - Data Distribution | Tremor"><meta data-rh="true" name="description" content="Happened Before"><meta data-rh="true" property="og:description" content="Happened Before"><meta data-rh="true" property="og:image" content="https://www.tremor.rs/assets/images/wayfair-b0bafac5cf230fcd5e29c8cb4560c334.png"><meta data-rh="true" name="twitter:image" content="https://www.tremor.rs/assets/images/wayfair-b0bafac5cf230fcd5e29c8cb4560c334.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-11-03T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/tremor-rs"><meta data-rh="true" property="article:tag" content="case-study,wayfair"><link data-rh="true" rel="icon" href="/static/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.tremor.rs/blog/2021/11/03/data-distribution"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/blog/2021/11/03/data-distribution" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/blog/2021/11/03/data-distribution" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tremor RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tremor Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8fde9d3c.css">
<link rel="preload" href="/assets/js/runtime~main.0a24082e.js" as="script">
<link rel="preload" href="/assets/js/main.fe542851.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.tremor.rs/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/0.12/getting-started/">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" positition="left" href="/docs/0.12">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/0.12/guides/">Guides</a></li><li><a class="dropdown__link" href="/docs/0.12/reference/">Reference Documentation</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.12/">0.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/edge/">edge</a></li><li><a class="dropdown__link" href="/docs/0.12/">0.12</a></li><li><a class="dropdown__link" href="/docs/0.11/">0.11</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-0.12,docs-rfc-current"></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/24/LFX-Blog-Carol">Hygienic error handling and validation for pipelines</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/07/LFX-Blog-Sasha">Support for the ClickHouse database in Tremor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/15/tdengine-colaboration">TDengine colaboration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/03/LFX-Blog-Prashant">Automating the tremor release process</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/02/tremor-tremors">Tremors - May &#x27;22</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://www.tremor.rs/assets/images/wayfair-b0bafac5cf230fcd5e29c8cb4560c334.png"><header><h1 class="title_f1Hy" itemprop="headline">Case Study - Data Distribution</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-11-03T00:00:00.000Z" itemprop="datePublished">November 3, 2021</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/60009416?s=200&amp;v=4" alt="The Tremor Team"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">The Tremor Team</span></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="happened-before">Happened Before<a href="#happened-before" class="hash-link" aria-label="Direct link to Happened Before" title="Direct link to Happened Before">​</a></h2><p>After the initial production success of tremor as a point solution for capacity
management during our peak trading cycles at Wayfair, the focus shifted a little
to the next key set of issues with our traditional observability platforms.</p><p>The simplified architecture of our logging systems is currently:  </p><p><img loading="lazy" alt="old pipeline" src="/assets/images/image1-638996ab9adf5b141b60cdeb4ab8a2de.png" width="598" height="168" class="img_ev3q"></p><p>The traffic shaping use case was a huge win for Wayfair&#x27;s SRE and operational
teams who manage our production estate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="identified-need">Identified Need<a href="#identified-need" class="hash-link" aria-label="Direct link to Identified Need" title="Direct link to Identified Need">​</a></h2><p>But we could do a lot better. The development lifecycle to capture, normalize,
enrich, enhance and standardize logs from 1000&#x27;s of engineers, 1000&#x27;s of applications
built in a diversity of programming languages was a have task for our observability
engineers.</p><p>Their environment still looks pretty grim:</p><p><img loading="lazy" alt="new pipeline" src="/assets/images/image3-931314084952fca9c5dc4a5d63edad3d.png" width="598" height="168" class="img_ev3q"></p><p>Displace and replace a plethora of in-house, open-source and commercial
off the shelf log capture, metrics capture and data distribution
technologies with a single cost-effective at hyperscale dynamically
load-adaptive solution.</p><p>The decision was taken to expand the processing capabilities of tremor beyond
traffic shaping, classification and rate limiting rules to general purpose
data processing of unstructured hierarchic JSON-like data streams. The shape
of data most common within the observability domain we were focused upon.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="required-outcome">Required Outcome<a href="#required-outcome" class="hash-link" aria-label="Direct link to Required Outcome" title="Direct link to Required Outcome">​</a></h2><p>Our systems specialists and service reliability engineers can
consolidate knowledge and tune to a unified operating experience and
center of excellence in our production estate based on a single well
known and cost efficient easy to operate alternative.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="characteristics">Characteristics<a href="#characteristics" class="hash-link" aria-label="Direct link to Characteristics" title="Direct link to Characteristics">​</a></h3><p>It is understood that data will be captured from and distributed to a
diverse and ever-changing set of production systems - built in many
programming languages and environments and distributed to an unknowable
set of destination systems.  </p><p>These systems include, but are not limited to: Graylog Extended Log
Format, Syslog,<br>
<!-- -->Kafka, TCP, UDP, Telegraf, Influx Line Protocol, ElasticSearch and many
more...</p><blockquote><p>Connectivity must be flexible enough to capture data from and
distributed data to synchronous, asynchronous protocols, transports
and systems without developers needing to learn or integrate with a
new technology. The solution must be invisible to developers.</p></blockquote><p>The unit economics of the existing system is hard to measure, hard to
plan and hard to remediate; especially given the rising year on year
firehose volumetrics, with rising velocity and rising peak loads.</p><blockquote><p>99% of the data either originates as JSON, or is transformed to JSON
just in time.</p></blockquote><p>The target systems for displacement and replacement have very well
understood and extract, load, transform, enrichment and normalization
algorithms that are coded and configured differently in each system.
This is difficult to maintain, enhance and evolve in an environment
where infrastructure and services are continuously evolving.</p><blockquote><p>A rich set of ETL and data manipulation and mutation primitives are
required so that all existing methods used for data processing across
the target systems can be replaced by a single easy to understand,
easy to program and optimized alternative.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="solution">Solution<a href="#solution" class="hash-link" aria-label="Direct link to Solution" title="Direct link to Solution">​</a></h3><p>Tremor has already established itself in the traffic shaping domain in
the logging and metrics domains - adding just-in-time traffic shaping
capabilities when needed; and preserving the original system’s
operational semantics and behaviours during normal operating conditions
when the system is operating within planned capacity constraints.</p><p><img loading="lazy" alt="new pipeline" src="/assets/images/image2-546e9398e3b74c01fefca8fa7450da0e.png" width="598" height="168" class="img_ev3q"></p><p>The mandate now expands to replacing many of our event capture systems
deployed on on-premise and cloud-native operating environments across
multiple data-centres globally.</p><p>Instead of our operations and service reliability teams needing to learn
and manage the service deployment and administrative lifecycle of
multiple components in this evolution we displace and replace those
systems - typically operating as sidecars on source systems where our
applications run on virtual machines, bare metal or containerized
environments with tremor.</p><p>The relatively primitive domain specific language developed as part of
the initial solution for traffic shaping is replaced with a new domain
specific language <code>tremor-script</code> designed for expressive data
filtration, extraction, enrichment and transformation to support:</p><ul><li>Classification, Categorization and rate limiting for Traffic Shaping</li><li>Enrichment, Normalization and micro-format parsing</li><li>Structural pattern matching over hierarchical nested JSON-like data</li><li>The ability to patch, merge and iterate over JSON-like data</li><li>A familiar expression language like in regular programming languages
with arithmetic, multiplicative and other common operations on
numeric and string data</li><li>Testing string encoded data for regular expression and other
micro-formats such as the logstash <code>grok</code>, <code>dissect</code>, <code>kv</code>
or stringified embedded json</li></ul><p>The resulting language and interpreter for <code>tremor-script</code> forms the
basis of the solution and is largely designed around the needs of the
logging domain - but delivered in a more generally useful incarnation
that is more widely applicable to other domains - such as in flight data
analytics, in flight ETL or processing metrics to name a few.</p><p>Most of the in-flight events are JSON or JSON-like. Inspired by a tweet
the tremor team happens upon the work of Daniel Lemire et al and
SIMD-accelerated JSON processing. Heinz ports this to rust and tremor’s
sister project and organization simd-lite is born. The tremor team also
maintains the rust port of simd-json with other maintainers interested
in fast and efficient data parallel parsing of JSON.</p><p>Finally, tremor undergoes a steady pace of innovation with benchmark
driven performance optimizations. The combined effect of an efficient
interpreter, the ability to easily benchmark synthetic analogs of real
world use cases in our benchmark system, and the adoption of more
workload appropriate and efficient low level memory allocators such as
<code>jemalloc</code>, then <code>mimalloc</code>, then <code>snmalloc</code> by Microsoft Research
results an order of magnitude level of infrastructure cost savings. The
production estate shrinks by 10x in terms of the number of deployed
systems, the compute capacity required, and the committed memory
required when compared to the displaced and replaced systems.  </p><p>Further - tremor uses far less memory and resources on the source
systems making it a much improved sidecar on our source hosts.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>Tremor’s core mission and mandate now extends from high quality of
service data distribution with load-adaptive traffic management for the
1% ( and typically less ) of time our systems are under-resourced; and,
the other 99% of the time is 10x more cost efficient.</p><p>Tremor preserves its facility to remain invisible to developers during
this phase of expansion whilst drastically improving the lives of our
operational engineers and service reliability engineers. The measured
and validated cost-efficiencies offer compounding value that further
drives the mandate of the project and pushes it into its next phase of
evolution.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/case-study">case-study</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/wayfair">wayfair</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/tremor-rs/tremor-www/tree/main/blog/2021-11-03-data-distribution.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2021/11/04/data-flow"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Case Study - Data Flow with Tremor</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/11/02/traffic-shaping"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Case Study - Traffic Shaping</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#happened-before" class="table-of-contents__link toc-highlight">Happened Before</a></li><li><a href="#identified-need" class="table-of-contents__link toc-highlight">Identified Need</a></li><li><a href="#required-outcome" class="table-of-contents__link toc-highlight">Required Outcome</a><ul><li><a href="#characteristics" class="table-of-contents__link toc-highlight">Characteristics</a></li><li><a href="#solution" class="table-of-contents__link toc-highlight">Solution</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.tremor.rs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/TremorDEBS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UCg1hxwEjh9szpYg8SxL0U7Q" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
          Copyright © 2025, Tremor Authors | Documentation Distributed under CC-BY-4.0.<br><br>
              <p style="font-size: smaller;">Hosted by: <a href="https://www.netlify.com/" rel="noreferrer noopener" aria-label="Netlify"><img src="/img/netlify-full-logo.svg" alt="CNCF" style="width: 3%;"></a>
              &nbsp;&nbsp;&nbsp;&nbsp;
              Project of: <a href="https://www.cncf.io/" rel="noreferrer noopener" aria-label="CNCF"><img src="/img/cncf-color.svg" alt="CNCF" style="width: 5%;"></a></p>
        <small>© 2025 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.</small>
        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.0a24082e.js"></script>
<script src="/assets/js/main.fe542851.js"></script>
</body>
</html>