"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[8189],{33671:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var r=n(58168),o=(n(96540),n(15680));n(40281);const a={sidebar_label:"gpubsub_consumer (Google Pub/Sub)",sidebar_position:1},s="The gpubsub_consumer Connector",i={unversionedId:"reference/connectors/gpubsub_consumer",id:"version-0.12/reference/connectors/gpubsub_consumer",title:"The gpubsub_consumer Connector",description:"This connector allows consuming a Google PubSub queue.",source:"@site/versioned_docs/version-0.12/reference/connectors/gpubsub_consumer.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/gpubsub_consumer",permalink:"/docs/0.12/reference/connectors/gpubsub_consumer",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/connectors/gpubsub_consumer.md",tags:[],version:"0.12",sidebarPosition:1,frontMatter:{sidebar_label:"gpubsub_consumer (Google Pub/Sub)",sidebar_position:1},sidebar:"indexSidebar",previous:{title:"gbq (Google Big Query)",permalink:"/docs/0.12/reference/connectors/gbq"},next:{title:"gpubsub_producer (Google Pub/Sub)",permalink:"/docs/0.12/reference/connectors/gpubsub_producer"}},u={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Payload structure",id:"payload-structure",level:2}],c={toc:l},g="wrapper";function d(e){let{components:t,...n}=e;return(0,o.yg)(g,(0,r.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"the-gpubsub_consumer-connector"},"The ",(0,o.yg)("inlineCode",{parentName:"h1"},"gpubsub_consumer")," Connector"),(0,o.yg)("p",null,"This connector allows consuming a Google PubSub queue."),(0,o.yg)("h2",{id:"configuration"},"Configuration"),(0,o.yg)("p",null,"The credentials must be provided in a JSON file. The path to the JSON file should be set as an environment variable called ",(0,o.yg)("inlineCode",{parentName:"p"},"GOOGLE_APPLICATION_CREDENTIALS")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tremor",metastring:'title="config.troy"',title:'"config.troy"'},'define connector gsub from gpubsub_consumer\nwith\n    codec = "string",\n    config = {\n        "connect_timeout": 100000000, # optional - Connection timeout in nanoseconds, defaults to 1 second \n        "ack_deadline": 100000000, # optional - ACK deadline in nanoseconds, defaults to 10 seconds. PubSub will resend the message if it\'s not ACKed within this time\n        "subscription_id": "projects/my_project/subscriptions/test-subscription-a", # required - ID of the subscription to use\n        "endpoint": "https://us-east1-pubsub.googleapis.com" # optional - the endpoint for the PubSub API, defaults to https://pubsub.googleapis.com\n    }\nend;\n')),(0,o.yg)("h2",{id:"metadata"},"Metadata"),(0,o.yg)("p",null,"The connector will set the ",(0,o.yg)("inlineCode",{parentName:"p"},"$pubsub_connector")," metadata variable, which is a dictionary of the messages metadata."),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"field"),(0,o.yg)("th",{parentName:"tr",align:null},"type"),(0,o.yg)("th",{parentName:"tr",align:null},"description"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"message_id"),(0,o.yg)("td",{parentName:"tr",align:null},"string"),(0,o.yg)("td",{parentName:"tr",align:null},"The ID of the message, as provided by PubSub")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"ordering_key"),(0,o.yg)("td",{parentName:"tr",align:null},"string"),(0,o.yg)("td",{parentName:"tr",align:null},"The ordering key of the message")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"publish_time"),(0,o.yg)("td",{parentName:"tr",align:null},"integer"),(0,o.yg)("td",{parentName:"tr",align:null},"The time when the message was published (as nanoseconds since 1st January 1970 00:00:00 UTC")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"attributes"),(0,o.yg)("td",{parentName:"tr",align:null},"record with string values"),(0,o.yg)("td",{parentName:"tr",align:null},"The attributes attached to the message")))),(0,o.yg)("h2",{id:"payload-structure"},"Payload structure"),(0,o.yg)("p",null,"The raw payload will be passed as is to the codec"))}d.isMDXComponent=!0}}]);