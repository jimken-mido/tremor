"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[4133],{46126:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var t=o(58168),r=(o(96540),o(15680)),i=o(40281);const a={sidebar_label:"crononome (Scheduled messages)",sidebar_position:1},c="The crononome Connector",s={unversionedId:"reference/connectors/crononome",id:"version-0.12/reference/connectors/crononome",title:"The crononome Connector",description:"The crononome connector generates a periodic flow of events at a configured periodicity",source:"@site/versioned_docs/version-0.12/reference/connectors/crononome.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/crononome",permalink:"/docs/0.12/reference/connectors/crononome",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/connectors/crononome.md",tags:[],version:"0.12",sidebarPosition:1,frontMatter:{sidebar_label:"crononome (Scheduled messages)",sidebar_position:1},sidebar:"indexSidebar",previous:{title:"Connectors",permalink:"/docs/0.12/reference/connectors/"},next:{title:"discord",permalink:"/docs/0.12/reference/connectors/discord"}},l={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Illustrative example",id:"illustrative-example",level:2},{value:"Exercises",id:"exercises",level:2}],p={toc:d},m="wrapper";function u(e){let{components:n,...o}=e;return(0,r.yg)(m,(0,t.A)({},p,o,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"the-crononome-connector"},"The ",(0,r.yg)("inlineCode",{parentName:"h1"},"crononome")," Connector"),(0,r.yg)("p",null,"The crononome connector generates a periodic flow of events at a configured periodicity\nbased on the modern Gregorian calendar system."),(0,r.yg)("p",null,"As the name suggests - the connector is configured using ",(0,r.yg)("inlineCode",{parentName:"p"},"cron")," like schedules and\na user configurable data event provider by authors with the business event which\ncan be used to trigger downstream processing."),(0,r.yg)("p",null,"The connector is particularly useful when using transient or persistent state via the\n",(0,r.yg)("a",{parentName:"p",href:"./kv"},(0,r.yg)("inlineCode",{parentName:"a"},"kv"))," connector or via the state mechanism to evict and remove ",(0,r.yg)("inlineCode",{parentName:"p"},"stale")," data\nthat is no longer current or relevant to the running system."),(0,r.yg)("p",null,"The connector is also useful for driving periodic events when used in concert with\nother connectors or pipelines to periodically poll to retrieve meta data updates to\nmerge with in-memory state in the current solution. "),(0,r.yg)("h2",{id:"configuration"},"Configuration"),(0,r.yg)("p",null,"One or many ",(0,r.yg)("inlineCode",{parentName:"p"},"cron")," like specifications for the event schedule and a user defined data\npayload."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor",metastring:'title="config.troy"',title:'"config.troy"'},'define connector crononome from crononome\nwith\n  config = {\n    "entries": [{\n      "name": "test",                # A symbolic name for this schedule\n      "expr": "* * * * * *",         # A cron schedule\n      "payload": {"snot": "badger"}  # A user configurable payload value\n    }]\n  }\nend;\n')),(0,r.yg)("h2",{id:"illustrative-example"},"Illustrative example"),(0,r.yg)("p",null,"A simple tremor application that issues a single crononome event and uses it to\ntrigger an exit of the tremor runtime - a common quiescence pattern in our tests\ndriven by the crononome in this illustration."),(0,r.yg)("p",null,"A high level summary of this flow's logic:"),(0,r.yg)(i.K,{chart:"graph LR\n    A{Metronome} --\x3e|every second| B(triggered events)\n    B --\x3e|passthrough| C{Standard Output}\n    B --\x3e|stop server| D{Exit Runtime}",mdxType:"Mermaid"}),(0,r.yg)("p",null,"The application source for this example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'define flow main\nflow\n  use tremor::connectors;\n  use integration;\n  define connector crononome from crononome\n  with\n    config = {\n      "entries": [{\n        "name": "test",\n        "expr": "* * * * * *",\n        "payload": {"snot": "badger"}\n      }]\n    }\n  end;\n\n  define pipeline main\n  pipeline \n    select event.trigger from in into out;\n  end;\n\n  define pipeline exit\n  pipeline \n    select {\n      "exit": 0,\n      "delay": 1\n    } from in into out;\n  end;\n\n  create connector file from integration::write_file;\n  create connector crononome;\n  create connector exit from connectors::exit;\n  create pipeline main;\n  create pipeline exit;\n\n  connect /connector/crononome to /pipeline/main;\n  connect /connector/crononome to /pipeline/exit;\n  connect /pipeline/main to /connector/file;\n  connect /pipeline/exit to /connector/exit;\nend;\ndeploy flow main;\n')),(0,r.yg)("h2",{id:"exercises"},"Exercises"),(0,r.yg)("p",null,"To further explore the ",(0,r.yg)("inlineCode",{parentName:"p"},"crononome"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Modify the application to stop after N events by introducing a counter"),(0,r.yg)("li",{parentName:"ul"},"Modify the application to trigger a HTTP ",(0,r.yg)("inlineCode",{parentName:"li"},"GET")," request and serialize the response to a log file"),(0,r.yg)("li",{parentName:"ul"},"Replace the ",(0,r.yg)("inlineCode",{parentName:"li"},"crononome")," with a ",(0,r.yg)("inlineCode",{parentName:"li"},"crononome")," for periodic scheduled calendar driven events")))}u.isMDXComponent=!0}}]);