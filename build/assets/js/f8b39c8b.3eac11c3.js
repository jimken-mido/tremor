"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[9794],{22422:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=i(58168),t=(i(96540),i(15680));i(40281);const o={sidebar_label:"file",sidebar_position:1},a="The file Connector",s={unversionedId:"reference/connectors/file",id:"version-0.12/reference/connectors/file",title:"The file Connector",description:"The file connector enables reading and writing to files accessible via the file system.",source:"@site/versioned_docs/version-0.12/reference/connectors/file.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/file",permalink:"/docs/0.12/reference/connectors/file",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/connectors/file.md",tags:[],version:"0.12",sidebarPosition:1,frontMatter:{sidebar_label:"file",sidebar_position:1},sidebar:"indexSidebar",previous:{title:"elastic (Elastic Search)",permalink:"/docs/0.12/reference/connectors/elastic"},next:{title:"gbq (Google Big Query)",permalink:"/docs/0.12/reference/connectors/gbq"}},l={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Reader",id:"reader",level:3},{value:"Writer",id:"writer",level:3},{value:"How do I transform files with tremor?",id:"how-do-i-transform-files-with-tremor",level:2}],d={toc:c},f="wrapper";function p(e){let{components:n,...i}=e;return(0,t.yg)(f,(0,r.A)({},d,i,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("h1",{id:"the-file-connector"},"The ",(0,t.yg)("inlineCode",{parentName:"h1"},"file")," Connector"),(0,t.yg)("p",null,"The file connector enables reading and writing to files accessible via the file system."),(0,t.yg)("h2",{id:"configuration"},"Configuration"),(0,t.yg)("p",null,"File based event processint can be read oriented by setting the ",(0,t.yg)("inlineCode",{parentName:"p"},"mode")," configuration\nfield to ",(0,t.yg)("inlineCode",{parentName:"p"},"read")," or write based by setting the mode to one of:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"write")," or ",(0,t.yg)("inlineCode",{parentName:"li"},"truncate")," - Creates or Opens and truncates the target file"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"append")," - Creates or Opens the target file without truncation"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"overwrite")," - Creates or Opens without truncation and overwrites existing data")),(0,t.yg)("h3",{id:"reader"},"Reader"),(0,t.yg)("p",null,"An example file reader"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tremor"},'  define connector in_file from file\n  with \n    codec = "json"\n    preprocessors = ["separate"], # line by line processing\n    config = {\n      "path": "in.json",\n      "mode": "read",\n\n      # Override the default builtin internal buffer chunk size\n      # chunk_size = 8192,\n    },\n  end;\n')),(0,t.yg)("p",null,"Other useful ",(0,t.yg)("inlineCode",{parentName:"p"},"codec")," options might be ",(0,t.yg)("inlineCode",{parentName:"p"},"base64"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"string")," or ",(0,t.yg)("inlineCode",{parentName:"p"},"influx"),"."),(0,t.yg)("h3",{id:"writer"},"Writer"),(0,t.yg)("p",null,"An example file writer"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tremor"},'  define connector out_file from file\n  with \n    codec = "json-sorted", # Json sorted creates a consistent field order in record types\n    postprocessors = ["separate"], # line by line processing\n    config = {\n      "path": "out.log",\n      "mode": "truncate",\n\n      # Override the default builtin internal buffer chunk size\n      # chunk_size = 8192,\n    },\n  end;\n\n\n\n## How do I copy files with tremor?\n\n```mermaid\ngraph LR\n    A{File: in.json} --\x3e|read events line by line| B(passthrough)\n    B --\x3e|write events line by line| C{File: out.json}\n')),(0,t.yg)("p",null,"For this use case we need a file reader and writer"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tremor"},'define flow main\nflow  \n  use tremor::connectors;\n  use integration;\n\n  # we could use the connectors in integration but this is the file integration test\n  # so it makes more sense to define them here\n  define connector out_file from file\n  with \n    codec = "json-sorted", # Json sorted creates a consistent field order in record types\n    postprocessors = ["separate"], # line by line processing\n    config = {\n      "path": "out.log",\n      "mode": "truncate"\n    },\n  end;\n\n  define connector in_file from file\n  with \n    codec = "json",\n    preprocessors = ["separate"], # line by line processing\n    config = {\n      "path": "in.json",\n      "mode": "read"\n    },\n  end;\n\n  create connector in_file;\n  create connector out_file;\n  create connector exit from connectors::exit;\n  create pipeline main from integration::out_or_exit;\n\n  connect /connector/in_file to /pipeline/main;\n  connect /pipeline/main to /connector/out_file;\n  connect /pipeline/main/exit to /connector/exit;\n  \nend;\ndeploy flow main;\n')),(0,t.yg)("h2",{id:"how-do-i-transform-files-with-tremor"},"How do I transform files with tremor?"),(0,t.yg)("p",null,"For example we can read a line delimited JSON file and write it as base64 encoded YAML\nby changing our copy example above to use a different file writer configuration:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-tremor"},'  define connector out_file from file\n  with \n    codec = "yaml", \n    postprocessors = ["base64", "separate"], # line by line processing\n    config = {\n      "path": "out.log",\n      "mode": "truncate"\n    },\n  end;\n')))}p.isMDXComponent=!0}}]);