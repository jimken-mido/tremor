"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[2049],{1663:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var a=t(58168),i=(t(96540),t(15680));t(40281);const r={sidebar_position:3},o="Functions",s={unversionedId:"language/functions",id:"version-0.12/language/functions",title:"Functions",description:"Tremor provides access to a growing number of functions that allow",source:"@site/versioned_docs/version-0.12/language/functions.md",sourceDirName:"language",slug:"/language/functions",permalink:"/docs/0.12/language/functions",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/language/functions.md",tags:[],version:"0.12",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"indexSidebar",previous:{title:"Scripts",permalink:"/docs/0.12/language/scripts"},next:{title:"Expressions",permalink:"/docs/0.12/language/expressions"}},l={},u=[{value:"Standard functions",id:"standard-functions",level:2},{value:"Variable arguments",id:"variable-arguments",level:3},{value:"Recursion",id:"recursion",level:3},{value:"Match functions",id:"match-functions",level:2},{value:"Intrinsic Functions",id:"intrinsic-functions",level:2}],c={toc:u},d="wrapper";function p(e){let{components:n,...t}=e;return(0,i.yg)(d,(0,a.A)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"functions"},"Functions"),(0,i.yg)("p",null,"Tremor provides access to a growing number of functions that allow\nadvanced data manipulation or access to additional information."),(0,i.yg)("p",null,"Functions are namespaced to make identification easier."),(0,i.yg)("p",null,"Tremor also supports user defined functions. There are a few\nnoteworthy restrictions:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"Functions are pure / side effect free - you can not mutate ",(0,i.yg)("inlineCode",{parentName:"li"},"event"),", ",(0,i.yg)("inlineCode",{parentName:"li"},"state"),",\nor ",(0,i.yg)("inlineCode",{parentName:"li"},"$")," inside of a function."),(0,i.yg)("li",{parentName:"ol"},"Functions have to return a value, as tremor-script is expression oriented."),(0,i.yg)("li",{parentName:"ol"},"Functions can only be defined once, even if they take different forms or\narguments. Function overloading is not supported."),(0,i.yg)("li",{parentName:"ol"},"In matching functions, a ",(0,i.yg)("inlineCode",{parentName:"li"},"default")," case is required."),(0,i.yg)("li",{parentName:"ol"},"Functions can call other functions but they have to be a priori defined. The order of definitions is significant."),(0,i.yg)("li",{parentName:"ol"},"Tail recursion is supported, and constrained to a maximum recursion depth. A recursion depth is imposed as tremor-script is designed to operate on infinite streams of data so indefinite blocking/recursion is not supportable by design.")),(0,i.yg)("p",null,"Lets look at the types of functions we have."),(0,i.yg)("h2",{id:"standard-functions"},"Standard functions"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"/docs/0.12/language/reference/script#rule-fndefn"},"Grammar")),(0,i.yg)("p",null,"Standard functions are the common user-defined functions. They take a given number of arguments, each with\na name."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tremor"},"## This function adds two values together\nfn add(a, b) with\n  a + b\nend\n")),(0,i.yg)("h3",{id:"variable-arguments"},"Variable arguments"),(0,i.yg)("p",null,"It is possible to use a variable number arguments by appending a final ",(0,i.yg)("inlineCode",{parentName:"p"},"...")," ellipsis in a standard\nfunction definition. The anonymous arguments will be provided via the ",(0,i.yg)("inlineCode",{parentName:"p"},"args")," keyword."),(0,i.yg)("h3",{id:"recursion"},"Recursion"),(0,i.yg)("p",null,"Standard functions with a fixed arity, that is, without variable arguments, can be tail-recursive."),(0,i.yg)("p",null,"Tremor imposes a restriction in recursion depth. As tremor is an event processing system\nit is not desirable to have long running functions that block events from being processed\nthrough the system."),(0,i.yg)("p",null,"A function can recurse and call itself using the ",(0,i.yg)("a",{parentName:"p",href:"/docs/0.12/language/reference/script#rule-recur"},(0,i.yg)("inlineCode",{parentName:"a"},"recur")," statement"),"."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tremor"},"use std::array;\n\nfn sum_(e, es) with\n  let l = array::len(es);\n  match l of\n    case l when l > 0 => \n      let a = es[0];\n      recur(e + es[0], es[1:l])\n    default => e\n  end\nend;\n\nfn sum(...) with\n  sum_(0, args)\nend\n")),(0,i.yg)("h2",{id:"match-functions"},"Match functions"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"/docs/0.12/language/reference/script#rule-fndefn"},"Grammar")),(0,i.yg)("p",null,"Since matching and extracting are a core functionality for tremor matching on\nfunction arguments is directly supported."),(0,i.yg)("p",null,"The same patterns that are used in ",(0,i.yg)("inlineCode",{parentName:"p"},"match")," can be used in function cases\nincluding extractors. If any extracting pattern is used and matches the function\nargument will be replaced by the result of the extraction."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-tremor"},"## calculates the fibonaci sequence\nfn fib_(a, b, n) of\n  case (a, b, n) when n > 0 => recur(b, a + b, n - 1)\n  default => a\nend;\n\n## calculates the fibonaci sequence\nfn fib(n) with\n  fib_(0, 1, n)\nend;\n")),(0,i.yg)("h2",{id:"intrinsic-functions"},"Intrinsic Functions"),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"/docs/0.12/language/reference/script#rule-intrinsic"},"Grammar")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Intrinsic functions cannot be user-defined.")),(0,i.yg)("p",null,"Intrinsic functions represent builtin or pre-defined functions implemented in the rust programming\nlanguage that are a builtin component of the tremor project and are provided out of the box."),(0,i.yg)("p",null,"The ",(0,i.yg)("a",{parentName:"p",href:"../reference/stdlib"},"Standard library")," documentation, for example, is generated from the documentation\nprovided in the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-runtime/tree/main/tremor-script/lib"},"Tremor Standard library"),". The ",(0,i.yg)("a",{parentName:"p",href:"../reference/stdlib"},"Standard library")," is primarily composed of intrinsic or bulitin\nfunctions."))}p.isMDXComponent=!0}}]);