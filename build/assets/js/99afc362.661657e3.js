"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[7958],{73260:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>s,toc:()=>d});var o=r(58168),a=(r(96540),r(15680));const n={title:"Wayfair Case Study",tags:["case-study","wayfair"],author:"The Tremor Team",author_url:"https://github.com/tremor-rs",author_image_url:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4",image:"./media/wayfair.png",draft:!1,hide_table_of_contents:!1},i="Wayfair",s={permalink:"/blog/2021/11/01/wayfair-case-studies",editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/blog/2021-11-01-wayfair-case-studies.md",source:"@site/blog/2021-11-01-wayfair-case-studies.md",title:"Wayfair Case Study",description:"wayfair",date:"2021-11-01T00:00:00.000Z",formattedDate:"November 1, 2021",tags:[{label:"case-study",permalink:"/blog/tags/case-study"},{label:"wayfair",permalink:"/blog/tags/wayfair"}],readingTime:6.025,hasTruncateMarker:!1,authors:[{name:"The Tremor Team",url:"https://github.com/tremor-rs",imageURL:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4"}],frontMatter:{title:"Wayfair Case Study",tags:["case-study","wayfair"],author:"The Tremor Team",author_url:"https://github.com/tremor-rs",author_image_url:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4",image:"./media/wayfair.png",draft:!1,hide_table_of_contents:!1},prevItem:{title:"Case Study - Traffic Shaping",permalink:"/blog/2021/11/02/traffic-shaping"},nextItem:{title:"Property Based Testing of Tremor Script",permalink:"/blog/2021/07/06/Blog-Rohit-Property-Based-Testing"}},l={image:r(21697).A,authorsImageUrls:[void 0]},d=[{value:"The Origin of Tremor",id:"the-origin-of-tremor",level:2},{value:"The Rise of Event Processing",id:"the-rise-of-event-processing",level:2},{value:"Cloud Native Migration",id:"cloud-native-migration",level:2},{value:"Tremor Today",id:"tremor-today",level:2},{value:"Tremor Tomorrow",id:"tremor-tomorrow",level:2}],m={toc:d},c="wrapper";function u(e){let{components:t,...n}=e;return(0,a.yg)(c,(0,o.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"wayfair",src:r(21697).A,width:"2709",height:"638"})),(0,a.yg)("p",null,"Development on Tremor started in the autumn of 2018 as a point solution\nfor introducing a configurable traffic-shaping mechanism for our\ninfrastructure platform engineering organization."),(0,a.yg)("p",null,"There were two use cases being considered at the time- the traffic-shaping use case, which had the highest priority; and a distributed data replication use case for our Kafka-based environments."),(0,a.yg)("h2",{id:"the-origin-of-tremor"},"The Origin of Tremor"),(0,a.yg)("p",null,"The ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/02/traffic-shaping"},"Traffic Shaping"),"\nuse case required that log information streaming from various systems be\ncategorized and classified in-flight, so that temporally bound rate\nlimits could be applied when our production estate has a\nworking set that is in excess of our current capacity. As a\n24x7x365 eCommerce environment with year-on-year higher peaks,\nhigher volumetrics and higher loads on our systems, this is a frequent\noccurrence. Tremor was designed to remove the burden of scaling these\nsystems from our system reliability and network operations center\nengineers.  "),(0,a.yg)("p",null,"This use case saw the birth of Tremor, which was delivered in 6 weeks,\njust in time for Cyber 5 (the long bank-holiday weekend in the US centered around Thanksgiving,\nwhere US folk go peak shopping!). At the time, Tremor was inflexible; only\nsupported connectivity to Kafka for Ingres and Elasticsearch downstream; and, the classification\nand rate-limiting logic was more or less hardwired- but it worked flawlessly!"),(0,a.yg)("p",null,"Although designed with our logging systems in mind, our metrics systems\nteam saw that Tremor would work for their environment (InfluxDB downstream rather than Elasticsearch, but the logic was\nbasically the same). Tremor was designed to detect backpressure on downstream systems, and to intelligently- based on user defined\nlogic- react by adaptively tuning the data distribution to\nselectively discard or forward data based on a classification system and rate limits."),(0,a.yg)("h2",{id:"the-rise-of-event-processing"},"The Rise of Event Processing"),(0,a.yg)("p",null,"The user-defined logic required by our logging and metrics teams very\nquickly became sophisticated. A fairly quick succession of releases saw\nthe logic change from fairly simple filtering, classification (enrichment)\nand rate limiting (selective dropping due to backpressure) to richer needs to slice and dice nested JSON-like data, to normalize\nthese datasets. This rising need for sophistication in processing along with the adoption of Tremor to replace Logstash and other log shipping frameworks in our\nsource nodes, and to replace Telegraf in our metrics environments, gave birth to Tremor as an ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/03/data-distribution"},"event processing engine")," in its own right."),(0,a.yg)("p",null,"With richer programming primitives, Tremor advanced from traffic shaping,\nand log and metrics shipping to log and metrics cleansing, normalisation,\nenrichment and transformation, to impose a common symbology and structure\non logs and metrics generated from many different programming languages,\nplatforms and tools across our production estate- from system logs\noriginated via Syslog, to those via GELF, or Prometheus."),(0,a.yg)("p",null,"The YAML-based configuration of the query pipelines quickly became error-prone and cumbersome as the sophistication, complexity and size of\napplication logic grew. In addition, the success of our scripting\nlanguage, ",(0,a.yg)("a",{parentName:"p",href:"docs/0.11/tremor-script/index"},"tremor-script"),",\nand its hygienic set of tooling and IDE integration encouraged the addition a\nquery language, thus enabling ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/04/data-flow"},"data flow processing")," with Tremor."),(0,a.yg)("h2",{id:"cloud-native-migration"},"Cloud Native Migration"),(0,a.yg)("p",null,"At the same time, our technology organisation was preparing for migration\nfrom on-premise data centres to cloud-based systems. Our legacy VM-based\nsystems were now being containerised and deployed via Kubernetes in our\non-premise environments. Simultaneously, our Cloud-native infrastructure, configuration as code,\nsecrets management, developer scaling and many other infrastructure and\ndevelopment platform teams were building out the services that would\nallow our line of business service engineers to migrate to the cloud."),(0,a.yg)("p",null,"Tremor was already battle-hardened as a sidecar deployment, and this was\nextended to Cloud-native deployments by our kubernetes team who packaged\nTremor for kubernetes as a set of ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/05/kubernetes-sidecars"},"helm charts"),"."),(0,a.yg)("p",null,"As a relatively fast-paced technology organisation, our logging and\nmetrics teams weren\u2019t stalled- the scripting and query languages\nenabled rapid development. However, lack of native support in Tremor to\nmodularise and reuse logic became a limiting factor. Thus, over the span of approximately a year, most of the ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/06/modularity"},"modularity mechanisms"),", now standard in Tremor, were developed."),(0,a.yg)("p",null,"Tremor was now battle-tested, battle-hardened and widely adopted, having\ngone through many enhancements and replacing many disparate tools and\nframeworks with a single, easy-to-operate solution.  "),(0,a.yg)("p",null,"Tremor is the first major component of in-house critical infrastructure\nthat was open-sourced by Wayfair and contributed to the Linux Foundation\nunder the Cloud Native Computing Foundation."),(0,a.yg)("p",null,"The Tremor team then selected a panel of experts and friends, who had early\naccess to Tremor, to assist with the open-sourcing process."),(0,a.yg)("h2",{id:"tremor-today"},"Tremor Today"),(0,a.yg)("p",null,"Today, Tremor is planned and progresses in the open. Anyone can\ncontribute, and with contribution comes maintainership. Tremor is now a CNCF\ncommunity (sandbox) project, and maintainership has grown beyond\nWayfair."),(0,a.yg)("p",null,"At Wayfair, Tremor has been adopted for our search environments. Our\nsearch domain has some complex use cases for audited document\nelementisation and indexing that are multi-participant and that need to\noccur transactionally."),(0,a.yg)("p",null,"Tremor\u2019s QoS mechanisms were extended to support ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/07/search"},"transaction orchestration")," to enable this and similar use cases. Our search teams are also\nleveraging Tremor for its traditional areas of strength in traffic\nshaping and adaptive rate limiting."),(0,a.yg)("p",null,"Our logging and metrics teams are now recalibrating our technology\norganisation's philosophy and core infrastructure that supports\nobservability across our production estate. The rise of CNCF\nOpenTelemetry offers developers a consistent and stable set of\nprimitives for logs, metrics and distributed tracing. It\u2019s a lingua\nfranca that offers developers consistency.  "),(0,a.yg)("p",null,"Even more important to large or extreme scale organisations is\nflexibility to make infrastructure and service decisions based on\ncapacity, cost, or other concerns. Through CNCF OpenTelemetry as a core\nbuilding block, now natively supported in Tremor, our observability\nteams can now unify our production support, operations and services\naround Tremor-based OpenTelemetry- preserving the key values that\nTremor adds, whilst opening up the Cloud Native new possibilities that\nOpenTelemetry and ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/08/uop"},"OpenTelemetry-based services")," offer."),(0,a.yg)("h2",{id:"tremor-tomorrow"},"Tremor Tomorrow"),(0,a.yg)("p",null,"As the tremor community grows, we have seen great contributions from the\ngrowing tremor community adding support for many different types of\nsystems - ranging from the addition of AMQP support by Nokia\nCommunications through to our ongoing collaboration with Microsoft\nResearch on the ",(0,a.yg)("inlineCode",{parentName:"p"},"snmalloc")," allocator which tremor defaults to. "),(0,a.yg)("p",null,"The latest production solution based on tremor at Wayfair is from our\nDeveloper Platforms technology organization - who have used an extension\nto PHP to identify ",(0,a.yg)("a",{parentName:"p",href:"/blog/2021/11/09/php-dead-code-detection"},"dead code")," in our legacy PHP monolith. This solution is\nbased on tremor and included contributions to tremor in the form of the\n",(0,a.yg)("inlineCode",{parentName:"p"},"unix_socket")," connectivity. Thank you Ramona!"),(0,a.yg)("p",null,"The Tremor maintainers also work on the Rust port of simd-json- SIMD\naccelerated JSON, which is a sister project to Tremor. Mentorships via\nthe Linux Foundation are also producing some wonderful new capabilities\nand enhancements to the system, ranging from better support for\ndeveloping gRPC-based connectors in Tremor, to GCP connectivity,\nor work to add a plugin development kit to Tremor.  "),(0,a.yg)("p",null,"Wayfair is already benefiting from community interest and contributions\nto the project - and the Tremor team has hired its newest member as a\nresult of open-sourcing the project. We are hoping to package and open-source more components of Wayfair\u2019s Tremor-based systems through the\nTremor Project, and through other open-source projects at Wayfair\nthrough our new Open Source Program Office."),(0,a.yg)("p",null,"If you are interested, hop on over to our ",(0,a.yg)("a",{parentName:"p",href:"https://chat.tremor.rs/"},"community chat\nserver")," and say hello!"))}u.isMDXComponent=!0},21697:(e,t,r)=>{r.d(t,{A:()=>o});const o=r.p+"assets/images/wayfair-b0bafac5cf230fcd5e29c8cb4560c334.png"}}]);