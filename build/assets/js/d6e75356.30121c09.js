"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[9484],{8635:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=n(58168),l=(n(96540),n(15680));n(40281);const r={},i="Command Line Interface",o={unversionedId:"reference/cli",id:"version-0.12/reference/cli",title:"Command Line Interface",description:"This document summarises the tremor cli commands.",source:"@site/versioned_docs/version-0.12/reference/cli.md",sourceDirName:"reference",slug:"/reference/cli",permalink:"/docs/0.12/reference/cli",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/cli.md",tags:[],version:"0.12",frontMatter:{},sidebar:"indexSidebar",previous:{title:"re (regex)",permalink:"/docs/0.12/reference/extractors/regex"},next:{title:"Operators",permalink:"/docs/0.12/reference/operators/"}},g={},s=[{value:"Audience",id:"audience",level:2},{value:"General flags and switches",id:"general-flags-and-switches",level:2},{value:"Version",id:"version",level:2},{value:"Commands",id:"commands",level:2},{value:"Shell Completions",id:"shell-completions",level:2},{value:"Subcommands",id:"subcommands",level:3},{value:"How to guess the shell completion?",id:"how-to-guess-the-shell-completion",level:3},{value:"How to explicitly guess completion based on active shell?",id:"how-to-explicitly-guess-completion-based-on-active-shell",level:3},{value:"Short form guess completion based on active shell",id:"short-form-guess-completion-based-on-active-shell",level:3},{value:"How to generate shell completions for the <code>bash</code> shell?",id:"how-to-generate-shell-completions-for-the-bash-shell",level:3},{value:"How to generate shell completions for the <code>zsh</code> shell?",id:"how-to-generate-shell-completions-for-the-zsh-shell",level:3},{value:"How to generate shell completions for the <code>elvish</code> shell?",id:"how-to-generate-shell-completions-for-the-elvish-shell",level:3},{value:"How to generate shell completions for the <code>fish</code> shell?",id:"how-to-generate-shell-completions-for-the-fish-shell",level:3},{value:"How to generate shell completions for the <code>powershell</code> shell?",id:"how-to-generate-shell-completions-for-the-powershell-shell",level:3},{value:"Running a standalone server instance",id:"running-a-standalone-server-instance",level:2},{value:"Options",id:"options",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Run tremor with zero deployments",id:"run-tremor-with-zero-deployments",level:3},{value:"Run tremor with alternative API endpoint",id:"run-tremor-with-alternative-api-endpoint",level:3},{value:"Run tremor capturing process id to a file",id:"run-tremor-capturing-process-id-to-a-file",level:3},{value:"Run tremor without API running a deployment",id:"run-tremor-without-api-running-a-deployment",level:3},{value:"Run tremor with a <code>TREMOR_PATH</code> environment set",id:"run-tremor-with-a-tremor_path-environment-set",level:3},{value:"Testing facilities",id:"testing-facilities",level:2},{value:"Arguments",id:"arguments-1",level:3},{value:"How do I write a benchmark?",id:"how-do-i-write-a-benchmark",level:3},{value:"How do I write an integration test?",id:"how-do-i-write-an-integration-test",level:3},{value:"How do I write a unit test suite?",id:"how-do-i-write-a-unit-test-suite",level:3},{value:"Further examples",id:"further-examples",level:3},{value:"Debugging facilities",id:"debugging-facilities",level:2},{value:"Options",id:"options-1",level:3},{value:"Sub Commands",id:"sub-commands",level:3},{value:"dbg <strong>dot</strong>",id:"dbg-dot",level:3},{value:"How to generate a GraphViz <code>.dot</code> file on standard output",id:"how-to-generate-a-graphviz-dot-file-on-standard-output",level:3},{value:"How to generate a GraphViz <code>.dot</code> file as PNG",id:"how-to-generate-a-graphviz-dot-file-as-png",level:3},{value:"dbg <strong>ast</strong>",id:"dbg-ast",level:3},{value:"dbg <strong>lex</strong>",id:"dbg-lex",level:3},{value:"dbg <strong>src</strong>",id:"dbg-src",level:3},{value:"Interactive Development",id:"interactive-development",level:2},{value:"Options",id:"options-2",level:3},{value:"How do I interactively test work under development?",id:"how-do-i-interactively-test-work-under-development",level:3},{value:"Documentation Generation",id:"documentation-generation",level:2},{value:"Options",id:"options-3",level:3},{value:"Arguments",id:"arguments-2",level:3},{value:"Generating documents for the standard library",id:"generating-documents-for-the-standard-library",level:3},{value:"Template",id:"template",level:2},{value:"Arguments",id:"arguments-3",level:3}],p={toc:s},d="wrapper";function m(e){let{components:t,...n}=e;return(0,l.yg)(d,(0,a.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"command-line-interface"},"Command Line Interface"),(0,l.yg)("p",null,"This document summarises the ",(0,l.yg)("inlineCode",{parentName:"p"},"tremor")," cli commands."),(0,l.yg)("h2",{id:"audience"},"Audience"),(0,l.yg)("p",null,"Tremor ",(0,l.yg)("inlineCode",{parentName:"p"},"operators")," and ",(0,l.yg)("inlineCode",{parentName:"p"},"developers")),(0,l.yg)("h2",{id:"general-flags-and-switches"},"General flags and switches"),(0,l.yg)("p",null,"Options that are available to all subcommands."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Options")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--help")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-h")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Prints help information")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--instance")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-i")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Instance identifier (default: ",(0,l.yg)("inlineCode",{parentName:"td"},"tremor"),")")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--logger-config")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-l")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"<LOGGER_CONFIG>")),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Configuration file for ",(0,l.yg)("a",{parentName:"td",href:"https://docs.rs/log4rs/latest/log4rs/"},"Log4RS")," ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"none")," )")))),(0,l.yg)("h2",{id:"version"},"Version"),(0,l.yg)("p",null,"Prints version information."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--version")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-V")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Prints version information")))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor --version\ntremor 0.12.0\n")),(0,l.yg)("h2",{id:"commands"},"Commands"),(0,l.yg)("p",null,"Set of commands supported by the command line interface."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"Subcommands")),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Command"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#shell-completions"},"completions")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate shell completions to stdout. Tries to guess the shell if no subcommand is given.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#standalone-server-instance"},"server")),(0,l.yg)("td",{parentName:"tr",align:null},"Tremor server")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#testing-facilities"},"test")),(0,l.yg)("td",{parentName:"tr",align:null},"Testing facilities")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#debugging-facilities"},"dbg")),(0,l.yg)("td",{parentName:"tr",align:null},"Advanced debugging commands")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#interactive-development"},"run")),(0,l.yg)("td",{parentName:"tr",align:null},"Run tremor script or query files against stdin or a json data archive, the data will be read from STDIN or an archive and written to STDOUT.")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#documentation-generation"},"doc")),(0,l.yg)("td",{parentName:"tr",align:null},"Generates documention from tremor script files")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#template"},"new")),(0,l.yg)("td",{parentName:"tr",align:null},"Generates a project template")))),(0,l.yg)("h2",{id:"shell-completions"},"Shell Completions"),(0,l.yg)("p",null,"Generate shell completions to standard output on the console. "),(0,l.yg)("p",null,"Tries to guess the shell if no subcommand is given."),(0,l.yg)("h3",{id:"subcommands"},"Subcommands"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Command"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-explicitly-guess-completion-based-on-active-shell"},"guess")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate completion based on active shell")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-generate-shell-completions-for-the-bash-shell"},"bash")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate bash shell completions")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-generate-shell-completions-for-the-zsh-shell"},"zsh")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate zsh shell completions")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-generate-shell-completions-for-the-elvish-shell"},"elvish")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate elvish shell completions")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-generate-shell-completions-for-the-fish-shell"},"fish")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate fish shell completions")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#how-to-generate-shell-completions-for-the-powershell-shell"},"powershell")),(0,l.yg)("td",{parentName:"tr",align:null},"Generate powershell shell completions")))),(0,l.yg)("h3",{id:"how-to-guess-the-shell-completion"},"How to guess the shell completion?"),(0,l.yg)("p",null,"Generate completion based on active shell"),(0,l.yg)("h3",{id:"how-to-explicitly-guess-completion-based-on-active-shell"},"How to explicitly guess completion based on active shell?"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions guess\n")),(0,l.yg)("h3",{id:"short-form-guess-completion-based-on-active-shell"},"Short form guess completion based on active shell"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions\n")),(0,l.yg)("h3",{id:"how-to-generate-shell-completions-for-the-bash-shell"},"How to generate shell completions for the ",(0,l.yg)("inlineCode",{parentName:"h3"},"bash")," shell?"),(0,l.yg)("p",null,"Generate ",(0,l.yg)("inlineCode",{parentName:"p"},"bash")," shell completions."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions bash\n")),(0,l.yg)("h3",{id:"how-to-generate-shell-completions-for-the-zsh-shell"},"How to generate shell completions for the ",(0,l.yg)("inlineCode",{parentName:"h3"},"zsh")," shell?"),(0,l.yg)("p",null,"Generate ",(0,l.yg)("inlineCode",{parentName:"p"},"zsh")," shell completions."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions zsh\n")),(0,l.yg)("h3",{id:"how-to-generate-shell-completions-for-the-elvish-shell"},"How to generate shell completions for the ",(0,l.yg)("inlineCode",{parentName:"h3"},"elvish")," shell?"),(0,l.yg)("p",null,"Generate elvish shell completions"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions elvish\n")),(0,l.yg)("h3",{id:"how-to-generate-shell-completions-for-the-fish-shell"},"How to generate shell completions for the ",(0,l.yg)("inlineCode",{parentName:"h3"},"fish")," shell?"),(0,l.yg)("p",null,"Generate ",(0,l.yg)("inlineCode",{parentName:"p"},"fish")," shell completions."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions fish\n")),(0,l.yg)("h3",{id:"how-to-generate-shell-completions-for-the-powershell-shell"},"How to generate shell completions for the ",(0,l.yg)("inlineCode",{parentName:"h3"},"powershell")," shell?"),(0,l.yg)("p",null,"Generate powershell shell completions."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor completions powershell\n")),(0,l.yg)("h2",{id:"running-a-standalone-server-instance"},"Running a standalone server instance"),(0,l.yg)("p",null,"Run tremor as a long lived standalone server instance."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Command"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#server-run"},"server run")),(0,l.yg)("td",{parentName:"tr",align:null},"Runs the tremor server process")))),(0,l.yg)("h3",{id:"options"},"Options"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--api-host")),(0,l.yg)("td",{parentName:"tr",align:null},"-a"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"<API_HOST>")),(0,l.yg)("td",{parentName:"tr",align:null},"The ",(0,l.yg)("inlineCode",{parentName:"td"},"host:port")," to listen for the API ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"0.0.0.0:9898")," )"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--debug-connectors")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-d")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"boolean")),(0,l.yg)("td",{parentName:"tr",align:null},"Loads the debug connectors ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"false")," )"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--no-api")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-n")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"boolean")),(0,l.yg)("td",{parentName:"tr",align:null},"Optionally disable API ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"false")," )"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--pid")),(0,l.yg)("td",{parentName:"tr",align:null},"-"),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"<PID>")),(0,l.yg)("td",{parentName:"tr",align:null},"Path to file to store captured process id if set ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"none")," )"),(0,l.yg)("td",{parentName:"tr",align:null})),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--recursion-limit")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-r")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"<RECURSION_LIMIT>")),(0,l.yg)("td",{parentName:"tr",align:null},"Function tail-recursion stack depth limit ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"1024")," )"),(0,l.yg)("td",{parentName:"tr",align:null})))),(0,l.yg)("h3",{id:"arguments"},"Arguments"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"artefacts"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"yes"),(0,l.yg)("td",{parentName:"tr",align:null},"Paths to ",(0,l.yg)("inlineCode",{parentName:"td"},".troy")," files containing pipelines, onramps, offramps to provision")))),(0,l.yg)("h3",{id:"run-tremor-with-zero-deployments"},"Run tremor with zero deployments"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor server run\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\nListening at: http://0.0.0.0:9898\n")),(0,l.yg)("p",null,"This command will run tremor with no deployments and expose its API on ",(0,l.yg)("a",{parentName:"p",href:"http://0.0.0.0:9898/v1"},(0,l.yg)("inlineCode",{parentName:"a"},"http://0.0.0.0:9898")),"."),(0,l.yg)("h3",{id:"run-tremor-with-alternative-api-endpoint"},"Run tremor with alternative API endpoint"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor server run --api-host localhost:1234\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\nListening at: http://localhost:1234\n")),(0,l.yg)("h3",{id:"run-tremor-capturing-process-id-to-a-file"},"Run tremor capturing process id to a file"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor server run --pid tremor.pid\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\nListening at: http://localhost:1234\n^C\n$ cat tremor.pid\n6348\n")),(0,l.yg)("h3",{id:"run-tremor-without-api-running-a-deployment"},"Run tremor without API running a deployment"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor server run --pid tremor.pid my_deployment.troy\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\n")),(0,l.yg)("h3",{id:"run-tremor-with-a-tremor_path-environment-set"},"Run tremor with a ",(0,l.yg)("inlineCode",{parentName:"h3"},"TREMOR_PATH")," environment set"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ export TREMOR_PATH=/usr/local/share/tremor/lib:/opt/my_app_modules/lib\n$ tremor server run --pid tremor.pid my_deployment.troy\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\n")),(0,l.yg)("h2",{id:"testing-facilities"},"Testing facilities"),(0,l.yg)("p",null,"Run user defined or tremor provided test suites."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor test [<MODE>] [<PATH>]\n")),(0,l.yg)("p",null,"The framework will walk the provided ",(0,l.yg)("inlineCode",{parentName:"p"},"path")," for tests conforming to the ",(0,l.yg)("inlineCode",{parentName:"p"},"mode")," of\noperation supplied and execute the tests."),(0,l.yg)("p",null,"To setup a test folder to contain our tests:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ mkdir tests\n$ cd tests\n$ echo '[ \"all\" ]' >> tags.yaml\n")),(0,l.yg)("p",null,"::note\nThe ",(0,l.yg)("inlineCode",{parentName:"p"},"tags.yaml")," allows a list of tags to be defined to control filtering tests\nby inclusion or exclusion. By default all tests are run. But tags allow a subset to be selected.\n::"),(0,l.yg)("h3",{id:"arguments-1"},"Arguments"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"MODE"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"One of ",(0,l.yg)("inlineCode",{parentName:"td"},"all"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"bench"),", ",(0,l.yg)("inlineCode",{parentName:"td"},"integration"),", or ",(0,l.yg)("inlineCode",{parentName:"td"},"unit"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"PATH"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"The root test path")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"REPORT"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Should generate a test report to specified path")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"INCLUDES"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional tags to filter test executions by")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"EXCLUDES"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Optional tags to filter test executions by")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"QUIET"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"only print failed tests")))),(0,l.yg)("h3",{id:"how-do-i-write-a-benchmark"},"How do I write a benchmark?"),(0,l.yg)("p",null,"Within our parent ",(0,l.yg)("inlineCode",{parentName:"p"},"tests")," folder, we can create one or many sub folders to\ncontain benchmarks:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests\n$ mkdir bench\n$ cd bench\n$ echo '[ \"bench\" ]' >> tags.yaml\n")),(0,l.yg)("p",null,"Let us create a benchmark called ",(0,l.yg)("inlineCode",{parentName:"p"},"example")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},'$ cd tests/bench\n$ mkdir example\n$ cd example\n$ echo \'[ "pipeline", "codec::binary", "passthrough", "example" ]\' >> tags.yaml\n')),(0,l.yg)("p",null,"Create a deployment file ",(0,l.yg)("inlineCode",{parentName:"p"},"config.troy")," that encapsulates our benchmark logic:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-tremor"},'define flow main\nflow\n  # Our pipeline under test\n  define pipeline passthrough\n  pipeline\n    select event from in into out;\n  end;\n\n  # Benchmark conditions with replayed data\n  define connector bench from bench\n  args\n    codec = "json",\n    file = "data.json.xz",\n    base64 = false,\n  with\n    codec = args.codec,\n    config = {\n      "base64": args.base64,\n      "source":  "./#{args.file}",\n      "warmup_secs": 5,\n      "stop_after_secs": 25,\n      "significant_figures": 2,\n    }\n  end;\n\n  create connector bench from bench\n  with\n    codec = "binary",\n  end;\n  create pipeline main from passthrough;\n\n  connect /connector/bench to /pipeline/main;\n  connect /pipeline/main to /connector/bench;\nend;\ndeploy flow main;\n')),(0,l.yg)("p",null,"This assumes that a ",(0,l.yg)("inlineCode",{parentName:"p"},"data.json.xz")," line delimited json file exists in the test folder."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-json"},'{ "snot": "badger" }\n')),(0,l.yg)("p",null,"We can execute this test directly in the current working folder."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests/bench/example\n$ tremor test bench .\n  Benchmark: Running .\n    Tags:  codec:binary pipeline passthrough example\n\n       | Value Percentile TotalCount 1/(1-Percentile)\n       | \n       | 12799 0.00000          1           1.00\n       | 55551 0.25000     271201           1.33\n...\n       | 23986175 1.00000    1077905     1048576.00\n       | 31719423 1.00000    1077906     1398101.33\n       | 31719423 1.00000    1077906            inf\n       | #[Mean       =    160029.80, StdDeviation   =    454979.40]\n       | #[Max        =     31719423, Total count    =      1077906]\n       | #[Buckets    =           30, SubBuckets     =         3968]\n       | \n       | \n       | Throughput   (data): 0.4 MB/s\n       | Throughput (events): 43.1k events/s\n\n  Elapsed: 30s 80ms\n\n\nAll Benchmark Stats: Pass 1 Fail 0 Skip 0  Asserts 0 \nTotal Stats: Pass 1 Fail 0 Skip 0  Asserts 0 \nTotal Elapsed: 30s 83ms\n")),(0,l.yg)("p",null,"We can execute our entire suite and discover all benchmarks automatically:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor test bench tests\n")),(0,l.yg)("p",null,"Generally, reusable logic and the ",(0,l.yg)("inlineCode",{parentName:"p"},"TREMOR_PATH")," environment variable will be set where\nexternal modules, such as utilities in the standard library are being used in a test."),(0,l.yg)("p",null,"Our worked example has no external module dependencies so we omit this."),(0,l.yg)("p",null,"The full source for ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/cli.md/tests/bench/example"},"this example"),"."),(0,l.yg)("p",null,"Any output from the system under test will be captured in log files"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests/bench/example\n$ ls *.log\nfg.err.log  fg.out.log\n")),(0,l.yg)("h3",{id:"how-do-i-write-an-integration-test"},"How do I write an integration test?"),(0,l.yg)("p",null,"Within our parent ",(0,l.yg)("inlineCode",{parentName:"p"},"tests")," folder, we can create one or many sub folders to\ncontain integration tests:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests\n$ mkdir integration\n$ cd integration\n$ echo '[ \"integration\" ]' >> tags.yaml\n")),(0,l.yg)("p",null,"Let us create an integration test called ",(0,l.yg)("inlineCode",{parentName:"p"},"example2")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},'$ cd tests/integration\n$ mkdir example2\n$ cd example2\n$ echo \'[ "integration", "structured", "metronome", "example2" ]\' >> tags.yaml\n')),(0,l.yg)("p",null,"Create a deployment file ",(0,l.yg)("inlineCode",{parentName:"p"},"config.troy")," that encapsulates our integration test logic:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-tremor"},'define flow main\nflow\n  define connector exit from exit;\n\n  # Connector under test\n  define connector metronome from metronome\n  with\n    config = {"interval": 500}\n  end;\n \n  define connector write_file from file\n  args\n    file = "out.log"\n  with \n    codec = "json-sorted",\n    postprocessors = ["separate"],\n    config = {\n        "path": args.file,\n        "mode": "truncate"\n    },\n  end;\n \n  define pipeline main\n  pipeline\n    select "triggered" from in into out;\n  end;\n\n  define pipeline exit\n  pipeline    \n    select {\n      "exit": 0,\n    } from in into out;\n  end;\n\n  create connector exit from exit;\n  create connector file from write_file;\n  create connector metronome;\n  create pipeline main;\n  create pipeline exit;\n\n  connect /connector/metronome to /pipeline/main;\n  connect /connector/metronome to /pipeline/exit;\n  connect /pipeline/main to /connector/file;\n  connect /pipeline/exit to /connector/exit;\nend;\ndeploy flow main;\n')),(0,l.yg)("p",null,"As this is an integration test we need an assert specification:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-yaml"},'status: 0\nname: example2\nasserts:\n  - source: out.log\n    contains:\n      - "\\"triggered\\""\n')),(0,l.yg)("p",null,"We can execute this test directly in the current working folder."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},'$ cd tests/integration/example2\n$ tremor test integration .\n  Integration: Running .\n    Tags:  example2 metronome integration connector\n       (+) Assert 0: Status example2\n       (+) Assert 1:   Contains `"triggered"` in `out.log`\n   Stats: Pass 2 Fail 0 Skip 0  Asserts 2 \n    Elapsed: 72ms 635us\n\n\nAll Integration Stats: Pass 1 Fail 0 Skip 0  Asserts 2 \nTotal Stats: Pass 1 Fail 0 Skip 0  Asserts 2 \nTotal Elapsed: 75ms 670us\n')),(0,l.yg)("p",null,"We can execute our entire suite and discover all integration tests automatically:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor test integration tests\n")),(0,l.yg)("p",null,"Generally, reusable logic and the ",(0,l.yg)("inlineCode",{parentName:"p"},"TREMOR_PATH")," environment variable will be set where\nexternal modules, such as utilities in the standard library are being used in a test."),(0,l.yg)("p",null,"Our worked example has no external module dependencies so we omit this."),(0,l.yg)("p",null,"The full source for ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/cli.md/tests/integration/example2"},"this example"),"."),(0,l.yg)("p",null,"Any output from the system under test will be captured in log files"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests/integration/example2\n$ ls *.log\nfg.err.log  fg.out.log out.log\n")),(0,l.yg)("h3",{id:"how-do-i-write-a-unit-test-suite"},"How do I write a unit test suite?"),(0,l.yg)("p",null,"Within our parent ",(0,l.yg)("inlineCode",{parentName:"p"},"tests")," folder, we can create one or many sub folders to\ncontain unit test suites:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests\n$ mkdir unit\n$ cd unit\n$ echo '[ \"unit\" ]' >> tags.yaml\n")),(0,l.yg)("p",null,"Let us create a unit test suite called ",(0,l.yg)("inlineCode",{parentName:"p"},"example3")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},'$ cd tests/unit\n$ mkdir example3\n$ cd example3\n$ echo \'[ "unit", "example3" ]\' >> tags.yaml\n')),(0,l.yg)("p",null,"Create a metadata file ",(0,l.yg)("inlineCode",{parentName:"p"},"meta.yaml")," that encapsulates our unit test conditions:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-tremor"},'{\n    "kind": "Unit",\n    "includes": "all.tremor"\n}\n')),(0,l.yg)("p",null,"As this is a ",(0,l.yg)("inlineCode",{parentName:"p"},"unit")," test we need to provide a test ",(0,l.yg)("inlineCode",{parentName:"p"},"suite"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-tremor"},'# We import the `std::test` module with unit test support\nuse std::test;\n\n# We include a function for simplicity in this example\nfn square(x) with\n  x * x\nend;\n\n# Our suite of tests\ntest::suite({\n  "name": "square test",\n  "tags": ["square"],\n  "tests": [\n    test::test({\n      "name": "square_2",\n      "test": test::assert("square_2", square(2), 4)\n    }),\n    test::test({\n      "name": "square_4",\n      "test": test::assert("square_4", square(4), 16)\n    }),\n    test::test({\n      "name": "square_10",\n      "test": test::assert("square_10", square(10), 100)\n    }),\n  ]\n});\n')),(0,l.yg)("p",null,"We can execute this test directly in the current working folder ."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ cd tests/unit/example3\n$ tremor test unit .\nFramework: Finding unit test scenarios\n  Unit Test Scenario: /workspace/tremor-www/docs/operations/tests/unit/example3/all.tremor\n    Tags:  unit example3\n\n    Suite: square test\n      Tags:  square unit example3\n   Stats: Pass 3 Fail 0 Skip 0  Asserts 3 \n    Elapsed: 4ms 611us\n  Unit Stats: Pass 3 Fail 0 Skip 0  Asserts 3 \n\n\n\nAll Unit Stats: Pass 3 Fail 0 Skip 0  Asserts 3 \nTotal Stats: Pass 3 Fail 0 Skip 0  Asserts 3 \nTotal Elapsed: 7ms 263us\n")),(0,l.yg)("p",null,"We can execute our entire suite and discover all integration tests automatically:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor test unit tests\n")),(0,l.yg)("p",null,"Generally, reusable logic and the ",(0,l.yg)("inlineCode",{parentName:"p"},"TREMOR_PATH")," environment variable will be set where\nexternal modules, such as utilities in the standard library are being used in a test."),(0,l.yg)("p",null,"Our worked example has no external module dependencies so we omit this."),(0,l.yg)("p",null,"The full source for ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/cli.md/tests/unit/example3"},"this example"),"."),(0,l.yg)("h3",{id:"further-examples"},"Further examples"),(0,l.yg)("p",null,"Tremor ships with more complete examples that we run as part of our CI and CD\nprocesses that can be referenced ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-runtime/tree/main/tremor-cli/tests"},"here"),"."),(0,l.yg)("h2",{id:"debugging-facilities"},"Debugging facilities"),(0,l.yg)("p",null,"Debugging commands useful for contributors, language writers, and tremor\noperators and authors."),(0,l.yg)("h3",{id:"options-1"},"Options"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--no-banner")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-b")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Do not print the banner ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"false")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--no-highlight")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-n")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Do not highlight output ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"false"))),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--raw")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-r")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Do not output any formatting. Disables highlight, banner, line numbers. ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"false")," )")))),(0,l.yg)("h3",{id:"sub-commands"},"Sub Commands"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Command"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#dbg-dot"},"dot")),(0,l.yg)("td",{parentName:"tr",align:null},"prints the .dot representation for a query (you can use `")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#dbg-ast"},"ast")),(0,l.yg)("td",{parentName:"tr",align:null},"prints the AST of the source")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#dbg-lex"},"lex")),(0,l.yg)("td",{parentName:"tr",align:null},"prints lexemes")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("a",{parentName:"td",href:"#dbg-src"},"src")),(0,l.yg)("td",{parentName:"tr",align:null},"prints source")))),(0,l.yg)("h3",{id:"dbg-dot"},"dbg ",(0,l.yg)("strong",{parentName:"h3"},"dot")),(0,l.yg)("p",null,"Generates a ",(0,l.yg)("a",{parentName:"p",href:"https://graphviz.org/"},"GraphViz")," ",(0,l.yg)("inlineCode",{parentName:"p"},".dot")," graph representation for a query."),(0,l.yg)("h3",{id:"how-to-generate-a-graphviz-dot-file-on-standard-output"},"How to generate a GraphViz ",(0,l.yg)("inlineCode",{parentName:"h3"},".dot")," file on standard output"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor dbg dot [<SCRIPT>]\n")),(0,l.yg)("h3",{id:"how-to-generate-a-graphviz-dot-file-as-png"},"How to generate a GraphViz ",(0,l.yg)("inlineCode",{parentName:"h3"},".dot")," file as PNG"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor dbg dot foo.troy | dot -Tpng -o foo.troy.png\n")),(0,l.yg)("h3",{id:"dbg-ast"},"dbg ",(0,l.yg)("strong",{parentName:"h3"},"ast")),(0,l.yg)("p",null,"Generate the Abstract syntax Tree ( AST ) of a valid tremor source files"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor dbg ast [<SCRIPT>]\n")),(0,l.yg)("h3",{id:"dbg-lex"},"dbg ",(0,l.yg)("strong",{parentName:"h3"},"lex")),(0,l.yg)("p",null,"Prints a representation of the lexical token stream for the source passed."),(0,l.yg)("p",null,"This tool is useful for understanding the lexical structure of a tremor source,\nor when troubleshotting and debugging changes to the lexer."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor dbg lex [<SCRIPT>]\n")),(0,l.yg)("h3",{id:"dbg-src"},"dbg ",(0,l.yg)("strong",{parentName:"h3"},"src")),(0,l.yg)("p",null,"Prints a syntax highlighted representation of the source based on the lexical token\nstream."),(0,l.yg)("p",null,"::note\nThis tool will highlight source even if the code is semantically incorrect. To check\nfor validity the ",(0,l.yg)("inlineCode",{parentName:"p"},"ast")," tool can be used to emit a hygienic error for these cases. The\n",(0,l.yg)("inlineCode",{parentName:"p"},"lex")," tool can be used to compare file variants."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor dbg src [<SCRIPT>]\n")),(0,l.yg)("h2",{id:"interactive-development"},"Interactive Development"),(0,l.yg)("p",null,"Run tremor script or query files against stdin or a json data archive, the data will be read from STDIN or an archive and written to STDOUT."),(0,l.yg)("p",null,"This command supports execution of ",(0,l.yg)("inlineCode",{parentName:"p"},"troy")," files but we recommend using ",(0,l.yg)("inlineCode",{parentName:"p"},"tremor server run")," instead."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor run [<OPTIONS>] <SCRIPT>\n")),(0,l.yg)("h3",{id:"options-2"},"Options"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"SCRIPT"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"filename to run the data through")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--interactive")),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Should not output to consumed source / produced synthetic data or errors")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--pretty")),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Should not pretty print data ","[ when in interactive mode ]")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--encoder")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-d")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"The codec to use for encoding the data ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"json")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--decoder")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-e")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"The codec to use for decoding the data ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"json")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--infile")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-i")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"input file ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"stdin")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--outfile")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-o")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"output file ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"stdout")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--preprocessor")),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"preprocessor to pass data through before decoding ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"separate")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--postprocessor")),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"postprocessor to pass data through after encoding ( default: ",(0,l.yg)("inlineCode",{parentName:"td"},"separate")," )")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"output-port"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"selects the port to pull output")))),(0,l.yg)("h3",{id:"how-do-i-interactively-test-work-under-development"},"How do I interactively test work under development?"),(0,l.yg)("p",null,"Given a simple tremor script:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-tremor"},"fn square(x) with\n  x * x\nend;\n\nsquare(event)\n")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor run source.tremor\n> 1\n1\n> 2\n4\n")),(0,l.yg)("p",null,"We can test hygienic errors by using a bad codec:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor run -d string source.tremor\n> *\nError in source.tremor:2:3 \n    2 |   x * x\n      |   ^^^^^ The binary operation `*` is not defined for the type `string` and `string`\n")),(0,l.yg)("p",null,"And we can exercise preprocessors:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor run -e string --postprocessor base64 source.tremor\n> 1\nMQ==\n")),(0,l.yg)("h2",{id:"documentation-generation"},"Documentation Generation"),(0,l.yg)("p",null,"This tool generates markdown documentation against modular tremor source designed\nfor inclusion into other projects. This tool is used by tremor itself to generate\nits own standard library documentation on the tremor website."),(0,l.yg)("p",null,"The tool traverses modular source contained within a module root and documents\ndefinitions available within ",(0,l.yg)("inlineCode",{parentName:"p"},".troy")," and ",(0,l.yg)("inlineCode",{parentName:"p"},".tremor")," files."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor doc [<DIR>] [<OUTDIR>]\n")),(0,l.yg)("h3",{id:"options-3"},"Options"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"--interactive")),(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"-i")),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Generates output to standard output")))),(0,l.yg)("h3",{id:"arguments-2"},"Arguments"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"DIR"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Directory or source to generate documents for")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"OUTDIR"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Directory to generate documents into")))),(0,l.yg)("h3",{id:"generating-documents-for-the-standard-library"},"Generating documents for the standard library"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor doc /path/to/tremor/lib /tmp/docs\n")),(0,l.yg)("h2",{id:"template"},"Template"),(0,l.yg)("p",null,"This command generates a new project template that can be used as a starting point."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"$ tremor new <NAME>\n")),(0,l.yg)("h3",{id:"arguments-3"},"Arguments"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Name"),(0,l.yg)("th",{parentName:"tr",align:null},"Switch"),(0,l.yg)("th",{parentName:"tr",align:null},"Kind"),(0,l.yg)("th",{parentName:"tr",align:null},"Multiple"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"NAME"),(0,l.yg)("td",{parentName:"tr",align:null},"None"),(0,l.yg)("td",{parentName:"tr",align:null},"switch/flag"),(0,l.yg)("td",{parentName:"tr",align:null},"no"),(0,l.yg)("td",{parentName:"tr",align:null},"Name of the project")))))}m.isMDXComponent=!0}}]);