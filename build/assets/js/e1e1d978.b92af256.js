"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[3479],{67201:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var n=a(58168),r=(a(96540),a(15680));a(40281);const i={},s="stats",l={unversionedId:"reference/stdlib/aggr/stats",id:"version-0.12/reference/stdlib/aggr/stats",title:"stats",description:"The stats module contains functions for aggregating statistical measures of various events.",source:"@site/versioned_docs/version-0.12/reference/stdlib/aggr/stats.md",sourceDirName:"reference/stdlib/aggr",slug:"/reference/stdlib/aggr/stats",permalink:"/docs/0.12/reference/stdlib/aggr/stats",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/stdlib/aggr/stats.md",tags:[],version:"0.12",frontMatter:{},sidebar:"indexSidebar",previous:{title:"aggr",permalink:"/docs/0.12/reference/stdlib/aggr/"},next:{title:"win",permalink:"/docs/0.12/reference/stdlib/aggr/win"}},o={},u=[{value:"Size",id:"size",level:2},{value:"Functions",id:"functions",level:2},{value:"hdr(number, array)",id:"hdrnumber-array",level:3},{value:"mean(number)",id:"meannumber",level:3},{value:"var(number)",id:"varnumber",level:3},{value:"dds(number, array)",id:"ddsnumber-array",level:3},{value:"sum(number)",id:"sumnumber",level:3},{value:"stdev(number)",id:"stdevnumber",level:3},{value:"count()",id:"count",level:3},{value:"min(number)",id:"minnumber",level:3},{value:"max(number)",id:"maxnumber",level:3}],d={toc:u},g="wrapper";function m(e){let{components:t,...a}=e;return(0,r.yg)(g,(0,n.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"stats"},"stats"),(0,r.yg)("p",null," The stats module contains functions for aggregating statistical measures of various events."),(0,r.yg)("h2",{id:"size"},"Size"),(0,r.yg)("p",null," When using stats aggregate functions size in memory becomes an important factor from a capacity planning perspective. The exact size of a window using aggregates depends on three main factors:"),(0,r.yg)("p",null,' The size of the dimension identifier. I.e. if the window is identified by the string "window" it will require that amount of memory related to this. If it is identified by an array of 10.000 elements all reading "window" it will use (about) 10.000 times that size.\nThe unit size of each aggregate used in the window. We will try to give an estimate of size for each aggregate but please be aware that those are not always exact as they can depend on the data they hold.\nThe number of groups, if grouping is configured. Each group will maintain a separate window of data\nFor aggregates we\'ll provide an "order of magnitude" and a growth rate if applicable.'),(0,r.yg)("p",null," For example Fixed, 10 bytes indicate that the size doesn't grow and is in the order of two digit bytes. We try to give pessimistic estimates where possible."),(0,r.yg)("h2",{id:"functions"},"Functions"),(0,r.yg)("h3",{id:"hdrnumber-array"},"hdr(number, array)"),(0,r.yg)("p",null,"Uses a High Dynamic Range ( HDR ) Histogram to calculate all basic statistics against the event\nvalues sin the current windowed operation. The function additionally interpolates percentiles or\nquartiles based on a configuration specification passed in as an argument to the aggregater\nfunction."),(0,r.yg)("p",null,"The HDR Histogram trades off memory utilisation for accuracy and is configured internally to\nlimit accuracy to 2 significant decimal places."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 100 Kilo Bytes (note: this strongly depends on configuration, and can be estimated\nmore correctly with ",(0,r.yg)("a",{parentName:"li",href:"https://github.com/HdrHistogram/HdrHistogram#footprint-estimation"},"this formula"),")")),(0,r.yg)("blockquote",null,(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'aggr::stats::hdr(event.value, ["0.5","0.75","0.9","0.99","0.999"])\n'))),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"record")," (all values are integers)"),(0,r.yg)("h3",{id:"meannumber"},"mean(number)"),(0,r.yg)("p",null,"Calculates the stastical mean of the event values in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 100 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"float")),(0,r.yg)("h3",{id:"varnumber"},"var(number)"),(0,r.yg)("p",null,"Calculates the sample variance of event values in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 100 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"float")),(0,r.yg)("h3",{id:"ddsnumber-array"},"dds(number, array)"),(0,r.yg)("p",null,"Uses a Distributed data-stream Sketch ( DDS (",(0,r.yg)("a",{parentName:"p",href:"http://www.vldb.org/pvldb/vol12/p2195-masson.pdf"},"paper"),") Histogram to calculate count, min, max, mean\nand quartiles with quartile relative-error accurate over the range of points in the histogram.\nThe DDS histogram trades off accuracy ( to a very low error and guaranteed low relative error )\nand unlike HDR histograms does not need bounds specified."),(0,r.yg)("p",null,"size: Fixed, 10 Kilo Bytes (estimate based on ",(0,r.yg)("a",{parentName:"p",href:"https://arxiv.org/pdf/1908.10693.pdf"},"this paper"),")"),(0,r.yg)("blockquote",null,(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'aggr::stats::hdr(event.value, ["0.5","0.75","0.9","0.99","0.999"])\n'))),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"record")," (all values are floats)"),(0,r.yg)("h3",{id:"sumnumber"},"sum(number)"),(0,r.yg)("p",null,"Determines the arithmetic sum of event values in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 10 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"number")),(0,r.yg)("h3",{id:"stdevnumber"},"stdev(number)"),(0,r.yg)("p",null,"Calculates the sample standard deviation of event values in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 100 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"float")),(0,r.yg)("h3",{id:"count"},"count()"),(0,r.yg)("p",null,"Counts the number of events aggregated in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 10 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"integer")),(0,r.yg)("h3",{id:"minnumber"},"min(number)"),(0,r.yg)("p",null,"Determines the smallest event value in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 10 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"number")),(0,r.yg)("h3",{id:"maxnumber"},"max(number)"),(0,r.yg)("p",null,"Determines the largest event value in the current windowed operation."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"size: Fixed, 10 bytes")),(0,r.yg)("p",null,"Returns a ",(0,r.yg)("inlineCode",{parentName:"p"},"number")))}m.isMDXComponent=!0}}]);