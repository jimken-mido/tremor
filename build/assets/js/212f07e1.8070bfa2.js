"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[293],{74177:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=t(58168),r=(t(96540),t(15680));t(40281);const o={},i="Regex (re)",l={unversionedId:"tremor-script/extractors/regex",id:"version-0.11/tremor-script/extractors/regex",title:"Regex (re)",description:'The regex extractor extracts fields from data by parsing a regular expression provided by the user. It accepts a "perl-style regular expression"',source:"@site/versioned_docs/version-0.11/tremor-script/extractors/regex.md",sourceDirName:"tremor-script/extractors",slug:"/tremor-script/extractors/regex",permalink:"/docs/0.11/tremor-script/extractors/regex",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.11/tremor-script/extractors/regex.md",tags:[],version:"0.11",frontMatter:{},sidebar:"version-0.11/tutorialSidebar",previous:{title:"KV",permalink:"/docs/0.11/tremor-script/extractors/kv"},next:{title:"Extractors",permalink:"/docs/0.11/tremor-script/extractors"}},s={},c=[{value:"Predicate",id:"predicate",level:2},{value:"Extraction",id:"extraction",level:2},{value:"Example",id:"example",level:2},{value:"Matching one character",id:"matching-one-character",level:3},{value:"Character classes",id:"character-classes",level:3},{value:"Composites",id:"composites",level:4},{value:"Repetitions",id:"repetitions",level:4},{value:"Empty matches",id:"empty-matches",level:4},{value:"Grouping and flags",id:"grouping-and-flags",level:4}],p={toc:c},g="wrapper";function d(e){let{components:a,...t}=e;return(0,r.yg)(g,(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"regex-re"},"Regex (re)"),(0,r.yg)("p",null,'The regex extractor extracts fields from data by parsing a regular expression provided by the user. It accepts a "perl-style regular expression"'),(0,r.yg)("h2",{id:"predicate"},"Predicate"),(0,r.yg)("p",null,"When used with ",(0,r.yg)("inlineCode",{parentName:"p"},"~"),", the predicate passes if a valid regular expression is passed."),(0,r.yg)("h2",{id:"extraction"},"Extraction"),(0,r.yg)("p",null,"If the predicate passes, the extractor returns the matched values from the target. Returns an error if the regex fails to match."),(0,r.yg)("h2",{id:"example"},"Example"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'drop match { "test": "http://example.com/", "footle": "bar" } of\n  case foo = %{ test ~= re|^http://.*/$|, footle == "bar" } => foo\n  default => "ko"\nend\n')),(0,r.yg)("p",null,"The extractor is called by using the ",(0,r.yg)("inlineCode",{parentName:"p"},"~=")," operator and specifying ",(0,r.yg)("inlineCode",{parentName:"p"},"re")," as the extractor followed by regular expression after the pipe operator."),(0,r.yg)("p",null,"The following syntax is supported:"),(0,r.yg)("h3",{id:"matching-one-character"},"Matching one character"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},".             any character except new line (includes new line with s flag)\n\\d            digit (\\p{Nd})\n\\D            not digit\n\\pN           One-letter name Unicode character class\n\\p{Greek}     Unicode character class (general category or script)\n\\PN           Negated one-letter name Unicode character class\n\\P{Greek}     negated Unicode character class (general category or script)\n")),(0,r.yg)("h3",{id:"character-classes"},"Character classes"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"[xyz]         A character class matching either x, y or z (union).\n[^xyz]        A character class matching any character except x, y and z.\n[a-z]         A character class matching any character in range a-z.\n[[:alpha:]]   ASCII character class ([A-Za-z])\n[[:^alpha:]]  Negated ASCII character class ([^A-Za-z])\n[x[^xyz]]     Nested/grouping character class (matching any character except y and z)\n[a-y&&xyz]    Intersection (matching x or y)\n[0-9&&[^4]]   Subtraction using intersection and negation (matching 0-9 except 4)\n[0-9--4]      Direct subtraction (matching 0-9 except 4)\n[a-g~~b-h]    Symmetric difference (matching `a` and `h` only)\n[\\[\\]]        Escaping in character classes (matching [ or ])\n")),(0,r.yg)("p",null,"Any named character class may appear inside a bracketed ",(0,r.yg)("inlineCode",{parentName:"p"},"[...]")," character class. For example, ",(0,r.yg)("inlineCode",{parentName:"p"},"[\\p{Greek}[:digit:]]"),"matches any Greek or ASCII digit. ",(0,r.yg)("inlineCode",{parentName:"p"},"[\\p{Greek}&&\\pL]")," matches Greek letters."),(0,r.yg)("p",null,"Precedence in character classes, from most binding to least:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Ranges: ",(0,r.yg)("inlineCode",{parentName:"li"},"a-cd")," == ",(0,r.yg)("inlineCode",{parentName:"li"},"[a-c]d")),(0,r.yg)("li",{parentName:"ol"},"Union: ",(0,r.yg)("inlineCode",{parentName:"li"},"ab&&bc")," == ",(0,r.yg)("inlineCode",{parentName:"li"},"[ab]&&[bc]")),(0,r.yg)("li",{parentName:"ol"},"Intersection: ",(0,r.yg)("inlineCode",{parentName:"li"},"^a-z&&b")," == ",(0,r.yg)("inlineCode",{parentName:"li"},"^[a-z&&b]")),(0,r.yg)("li",{parentName:"ol"},"Negation")),(0,r.yg)("h4",{id:"composites"},"Composites"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"xy    concatenation (x followed by y)\nx|y   alternation (x or y, prefer x)\n")),(0,r.yg)("h4",{id:"repetitions"},"Repetitions"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"x*        zero or more of x (greedy)\nx+        one or more of x (greedy)\nx?        zero or one of x (greedy)\nx*?       zero or more of x (ungreedy/lazy)\nx+?       one or more of x (ungreedy/lazy)\nx??       zero or one of x (ungreedy/lazy)\nx{n,m}    at least n x and at most m x (greedy)\nx{n,}     at least n x (greedy)\nx{n}      exactly n x\nx{n,m}?   at least n x and at most m x (ungreedy/lazy)\nx{n,}?    at least n x (ungreedy/lazy)\nx{n}?     exactly n x\n")),(0,r.yg)("h4",{id:"empty-matches"},"Empty matches"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"^     the beginning of text (or start-of-line with multi-line mode)\n$     the end of text (or end-of-line with multi-line mode)\n\\A    only the beginning of text (even with multi-line mode enabled)\n\\z    only the end of text (even with multi-line mode enabled)\n\\b    a Unicode word boundary (\\w on one side and \\W, \\A, or \\z on other)\n\\B    not a Unicode word boundary\n")),(0,r.yg)("h4",{id:"grouping-and-flags"},"Grouping and flags"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"(exp)          numbered capture group (indexed by opening parenthesis)\n(?P<name>exp)  named (also numbered) capture group (allowed chars: [_0-9a-zA-Z])\n(?:exp)        non-capturing group\n(?flags)       set flags within current group\n(?flags:exp)   set flags for exp (non-capturing)\n")),(0,r.yg)("p",null,"Flags are each a single character. For example, ",(0,r.yg)("inlineCode",{parentName:"p"},"(?x)")," sets the flag ",(0,r.yg)("inlineCode",{parentName:"p"},"x")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"(?-x)")," clears the flag ",(0,r.yg)("inlineCode",{parentName:"p"},"x"),". Multiple flags can be set or cleared at the same time: ",(0,r.yg)("inlineCode",{parentName:"p"},"(?xy)")," sets both the ",(0,r.yg)("inlineCode",{parentName:"p"},"x")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"y")," flags and ",(0,r.yg)("inlineCode",{parentName:"p"},"(?x-y)")," sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"x")," flag and clears the ",(0,r.yg)("inlineCode",{parentName:"p"},"y")," flag."),(0,r.yg)("p",null,"All flags are by default set to off unless stated otherwise. They are:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},"i     case-insensitive: letters match both upper and lower case\nm     multi-line mode: ^ and $ match begin/end of line\ns     allow . to match \\n\nU     swap the meaning of x* and x*?\nu     Unicode support (enabled by default)\nx     ignore whitespace and allow line comments (starting with `#`)\n")))}d.isMDXComponent=!0}}]);