"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[5087],{25028:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var o=t(58168),r=(t(96540),t(15680)),i=t(40281);const s={sidebar_label:"exit",sidebar_position:102},a="The exit Connector",c={unversionedId:"reference/connectors/exit",id:"version-0.12/reference/connectors/exit",title:"The exit Connector",description:"This connector is not intended for production use, but for testing the Tremor runtime itself. To enable it pass --debug-connectors to tremor.",source:"@site/versioned_docs/version-0.12/reference/connectors/exit.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/exit",permalink:"/docs/0.12/reference/connectors/exit",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/connectors/exit.md",tags:[],version:"0.12",sidebarPosition:102,frontMatter:{sidebar_label:"exit",sidebar_position:102},sidebar:"indexSidebar",previous:{title:"cb (Circuit Breaker)",permalink:"/docs/0.12/reference/connectors/cb"},next:{title:"Configuration",permalink:"/docs/0.12/reference/connectors/common_configuration"}},p={},l=[{value:"Configuration",id:"configuration",level:2},{value:"Illustrative example",id:"illustrative-example",level:2}],d={toc:l},m="wrapper";function u(e){let{components:n,...t}=e;return(0,r.yg)(m,(0,o.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"the-exit-connector"},"The ",(0,r.yg)("inlineCode",{parentName:"h1"},"exit")," Connector"),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"This connector is not intended for production use, but for testing the Tremor runtime itself. To enable it pass ",(0,r.yg)("inlineCode",{parentName:"p"},"--debug-connectors")," to tremor.")),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"exit")," connector generates is a convenience designed for tremor based systems\nthat need to deterministically stop."),(0,r.yg)("p",null,'THe connector is particularly useful for integration tests to halt a process when\ntesting has completed. The connector is also useful for interactive testing when\nconsole redirection is being used to test processing behaviour allowing an "exit"\ncommand to halt the tremor server process.'),(0,r.yg)("h2",{id:"configuration"},"Configuration"),(0,r.yg)("p",null,"The connector needs no configuration"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},"  define connector stop from exit;\n")),(0,r.yg)("h2",{id:"illustrative-example"},"Illustrative example"),(0,r.yg)("p",null,"A simple tremor application that starts and shuts down when an event is\nreceived."),(0,r.yg)("p",null,"A high level summary of this flow's logic:"),(0,r.yg)(i.K,{chart:"graph LR\n    A{Console} --\x3e|every line| B(triggered events)\n    B --\x3e|passthrough| C{Standard Output}\n    B --\x3e|stop server| D{Exit Runtime}",mdxType:"Mermaid"}),(0,r.yg)("p",null,"The application source for this example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor",metastring:'title="stopper.troy"',title:'"stopper.troy"'},"define flow stopper\nflow\n  use tremor::connectors; # Use predefined console and exit connector definitions\n  use tremor::pipelines;  # Use predefined passthrough pipeline definition\n\n  create connector console from connectors::console;\n  create connector stop from connectors::exit;\n  create pipeline passthrough from pipelines::passthrough;\n  \n  connect /connector/console to /pipeline/passthrough;\n  connect /pipeline/passthrough to /connector/console;\n  connect /pipeline/passthrough to /connector/stop;\nend;\n\ndeploy flow stopper;\n")),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"Tremor supports a ",(0,r.yg)("inlineCode",{parentName:"p"},"quiescence")," protocol. As we connect our ",(0,r.yg)("inlineCode",{parentName:"p"},"console")," to the\npassthrough before the exit connector ",(0,r.yg)("inlineCode",{parentName:"p"},"stop")," - this means our event from the\nconsole's ",(0,r.yg)("inlineCode",{parentName:"p"},"stdin")," flows through the passthrough to ",(0,r.yg)("inlineCode",{parentName:"p"},"stdout")," in the same connector\nbefore the event is passed to the ",(0,r.yg)("inlineCode",{parentName:"p"},"stop")," exit connector instance."),(0,r.yg)("p",{parentName:"admonition"},"So we should see our event echo'd once."),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"$ tremor server run stopper.troy\ntremor version: 0.12.0 (RELEASE)\ntremor instance: tremor\nrd_kafka version: 0x000002ff, 1.8.2\nallocator: snmalloc\nListening at: http://0.0.0.0:9898\nBeep!\nBeep!\n"))))}u.isMDXComponent=!0}}]);