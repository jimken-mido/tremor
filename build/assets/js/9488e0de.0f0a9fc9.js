"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[2430],{25845:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>g,frontMatter:()=>o,metadata:()=>p,toc:()=>i});var n=a(58168),r=(a(96540),a(15680));a(40281);const o={},s="Codecs",p={unversionedId:"reference/codecs/index",id:"version-0.12/reference/codecs/index",title:"Codecs",description:"TL;DR: Codecs are used to describe how to decode data from the wire and encode it back to wire format.",source:"@site/versioned_docs/version-0.12/reference/codecs/index.md",sourceDirName:"reference/codecs",slug:"/reference/codecs/",permalink:"/docs/0.12/reference/codecs/",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/codecs/index.md",tags:[],version:"0.12",frontMatter:{},sidebar:"indexSidebar",previous:{title:"Configuration",permalink:"/docs/0.12/reference/connectors/common_configuration"},next:{title:"binary",permalink:"/docs/0.12/reference/codecs/binary"}},d={},i=[{value:"Usage",id:"usage",level:2},{value:"Codecs and Preprocessors",id:"codecs-and-preprocessors",level:3},{value:"Codecs and Postprocessors",id:"codecs-and-postprocessors",level:3},{value:"Data Format",id:"data-format",level:2},{value:"Supported Codecs",id:"supported-codecs",level:2}],c={toc:i},l="wrapper";function g(e){let{components:t,...a}=e;return(0,r.yg)(l,(0,n.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"codecs"},"Codecs"),(0,r.yg)("p",null,"TL;DR: Codecs are used to describe how to decode data from the wire and encode it back to wire format."),(0,r.yg)("p",null,"Tremor connects to external systems using ",(0,r.yg)("a",{parentName:"p",href:"../connectors"},"connectors"),". ",(0,r.yg)("a",{parentName:"p",href:"../connectors"},"Connectors")," use ",(0,r.yg)("inlineCode",{parentName:"p"},"codecs")," to transform the data Tremor receives from connected system participants into a structured value that forms the payload of each and every Tremor event."),(0,r.yg)("p",null,"Codecs are the means of turning the (mostly binary) data from the wire (e.g. from a TCP connection) into structured values for Tremor events and back into binary wire format.\nEach ",(0,r.yg)("a",{parentName:"p",href:"../connectors"},"connector")," can be configured with a ",(0,r.yg)("inlineCode",{parentName:"p"},"codec"),"."),(0,r.yg)("h2",{id:"usage"},"Usage"),(0,r.yg)("p",null,"If you expect ",(0,r.yg)("a",{parentName:"p",href:"https://www.json.org/"},(0,r.yg)("inlineCode",{parentName:"a"},"JSON"))," data from a TCP connection, you need to configure the ",(0,r.yg)("inlineCode",{parentName:"p"},"json")," codec."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'define connector tcp_example from tcp_server\nwith\n    codec = "json",\n    config = {\n        "url": "localhost:12345"\n    }\nend;\n')),(0,r.yg)("p",null,"This ",(0,r.yg)("inlineCode",{parentName:"p"},"tcp_example")," connector is configured to expect ",(0,r.yg)("a",{parentName:"p",href:"https://www.json.org/"},(0,r.yg)("inlineCode",{parentName:"a"},"JSON"))," data from each accepted TCP connection. It expects 1 JSON document after the next without a single byte separating them."),(0,r.yg)("h3",{id:"codecs-and-preprocessors"},"Codecs and Preprocessors"),(0,r.yg)("p",null,"If you expect line-delimited ",(0,r.yg)("a",{parentName:"p",href:"https://www.json.org/"},(0,r.yg)("inlineCode",{parentName:"a"},"JSON"))," instead, with 1 document per line, you need to add a ",(0,r.yg)("a",{parentName:"p",href:"../preprocessors"},"preprocessor")," that separates the wire data by newline and feeds each line to the codec."),(0,r.yg)("p",null,"Preprocessors perform various kinds of preprocessing on the wire data, e.g. splitting data by some separator or decompressing data, and multiple can be configured to operate in a chain. The result of this chain, one or multiple chunks of binary data, is passed on to the codec."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor"},'define connector line_delimited_json_via_tcp from tcp_server\nwith\n    preprocessors = [ \n        {\n            "name": "separate",\n            "config": {\n                "separator": "\\n"\n            }\n        } \n    ],\n    codec = "json",\n    config = {\n        "url": "localhost:65535"\n    }\nend;\n')),(0,r.yg)("p",null,"This ",(0,r.yg)("inlineCode",{parentName:"p"},"line_delimited_json_via_tcp")," connector is now configured to expect 1 ",(0,r.yg)("a",{parentName:"p",href:"https://www.json.org/"},(0,r.yg)("inlineCode",{parentName:"a"},"JSON"))," document per line from each accepted TCP connection. Just by adding the ",(0,r.yg)("a",{parentName:"p",href:"/docs/0.12/reference/preprocessors/separate"},(0,r.yg)("inlineCode",{parentName:"a"},"separate"))," Preprocessor."),(0,r.yg)("h3",{id:"codecs-and-postprocessors"},"Codecs and Postprocessors"),(0,r.yg)("p",null,"If we want to send out line delimited ",(0,r.yg)("a",{parentName:"p",href:"https://www.json.org/"},(0,r.yg)("inlineCode",{parentName:"a"},"JSON"))," where each JSON document is base64 encoded, we need to use a ",(0,r.yg)("a",{parentName:"p",href:"../postprocessors"},"postprocessor"),". Postprocessors perform some action on the binary data a codec produces. They can e.g. Split or join the data, compress the data or prefix it with a length-prefix."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'define connector my_tcp_client from tcp_client\nwith\n    codec = "json",\n    postprocessors = [\n        "base64",\n        "separate"\n    ],\n    config = {\n        "url": "localhost:9200"\n    }\nend;\n')),(0,r.yg)("p",null,"This ",(0,r.yg)("inlineCode",{parentName:"p"},"my_tcp_client")," connector is configured to use 2 postprocessors in a chain. First each event is encoded using the ",(0,r.yg)("a",{parentName:"p",href:"/docs/0.12/reference/codecs/json"},(0,r.yg)("inlineCode",{parentName:"a"},"json"))," codec, then the encoded binary data is base64-encoded by the ",(0,r.yg)("a",{parentName:"p",href:"/docs/0.12/reference/postprocessors/base64"},(0,r.yg)("inlineCode",{parentName:"a"},"base64"))," postprocessor and finally each resulting chunk of base64 data is split from the next by inserting a ",(0,r.yg)("inlineCode",{parentName:"p"},"line delimiter")," using the ",(0,r.yg)("a",{parentName:"p",href:"/docs/0.12/reference/postprocessors/separate"},(0,r.yg)("inlineCode",{parentName:"a"},"separate"))," postprocessor."),(0,r.yg)("p",null,"Codecs share similar concepts to ",(0,r.yg)("a",{parentName:"p",href:"../extractors"},"extractors"),", but differ in their application. Codecs are applied to external data as they are ingested by or egressed from a running Tremor process.\nExtractors, on the other hand, are used in ",(0,r.yg)("a",{parentName:"p",href:"/docs/0.12/language/scripts"},"scripts")," to extract structured from e.g. strings that are already part of a Tremor event."),(0,r.yg)("h2",{id:"data-format"},"Data Format"),(0,r.yg)("p",null,"Tremor's internal data representation is JSON-like. The supported value types are:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"String- UTF-8 encoded"),(0,r.yg)("li",{parentName:"ul"},"Numeric (float, integer)"),(0,r.yg)("li",{parentName:"ul"},"Boolean"),(0,r.yg)("li",{parentName:"ul"},"Null"),(0,r.yg)("li",{parentName:"ul"},"Array"),(0,r.yg)("li",{parentName:"ul"},"Record (string keys)"),(0,r.yg)("li",{parentName:"ul"},"Binary (raw bytes)")),(0,r.yg)("h2",{id:"supported-codecs"},"Supported Codecs"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Codec Name"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"binary"},"binary")),(0,r.yg)("td",{parentName:"tr",align:null},"Raw network endian binary data")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"binflux"},"binflux")),(0,r.yg)("td",{parentName:"tr",align:null},"An efficient binary representation of influx data")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"csv"},"csv")),(0,r.yg)("td",{parentName:"tr",align:null},"The CSV format as per RFC4180 - constrained to a single line")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"influx"},"influx")),(0,r.yg)("td",{parentName:"tr",align:null},"The ",(0,r.yg)("a",{parentName:"td",href:"https://docs.influxdata.com/influxdb/v1.7/write_protocols/line_protocol_tutorial/"},"influx line protocol"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"json"},"json")),(0,r.yg)("td",{parentName:"tr",align:null},"The ",(0,r.yg)("a",{parentName:"td",href:"https://json.org"},"JSON")," format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"json-sorted"},"json-sorted")),(0,r.yg)("td",{parentName:"tr",align:null},"The ",(0,r.yg)("a",{parentName:"td",href:"https://json.org"},"JSON")," format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"msgpack"},"msgpack")),(0,r.yg)("td",{parentName:"tr",align:null},"The ",(0,r.yg)("a",{parentName:"td",href:"https://msgpack.org"},"Msgpack")," binary format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"null"},"null")),(0,r.yg)("td",{parentName:"tr",align:null},"An drop only codec")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"statsd"},"statsd")),(0,r.yg)("td",{parentName:"tr",align:null},"The statds format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"string"},"string")),(0,r.yg)("td",{parentName:"tr",align:null},"UTF-8 String format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"syslog"},"syslog")),(0,r.yg)("td",{parentName:"tr",align:null},"The syslog format - IETF and BSD styles")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"yaml"},"yaml")),(0,r.yg)("td",{parentName:"tr",align:null},"The YAML format")))))}g.isMDXComponent=!0}}]);