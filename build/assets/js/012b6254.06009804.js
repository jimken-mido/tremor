"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[6605],{22225:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>n,metadata:()=>s,toc:()=>p});var t=r(58168),o=(r(96540),r(15680));const n={title:"Collaboration - Using Redpanda with Tremor",tags:["collaboration","wayfair"],author:"Tremor Team",author_url:"https://github.com/tremor-rs",author_image_url:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4",image:"./media/redpanda-rocket.png",draft:!1,hide_table_of_contents:!1},i="Using Redpanda with Tremor",s={permalink:"/blog/2021/12/13/redpanda",editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/blog/2021-12-13-redpanda.md",source:"@site/blog/2021-12-13-redpanda.md",title:"Collaboration - Using Redpanda with Tremor",description:"Like all good projects in the open source community, great collaborations start with ad hoc interactions.",date:"2021-12-13T00:00:00.000Z",formattedDate:"December 13, 2021",tags:[{label:"collaboration",permalink:"/blog/tags/collaboration"},{label:"wayfair",permalink:"/blog/tags/wayfair"}],readingTime:3.065,hasTruncateMarker:!1,authors:[{name:"Tremor Team",url:"https://github.com/tremor-rs",imageURL:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4"}],frontMatter:{title:"Collaboration - Using Redpanda with Tremor",tags:["collaboration","wayfair"],author:"Tremor Team",author_url:"https://github.com/tremor-rs",author_image_url:"https://avatars.githubusercontent.com/u/60009416?s=200&v=4",image:"./media/redpanda-rocket.png",draft:!1,hide_table_of_contents:!1},prevItem:{title:"Tremors - April '22",permalink:"/blog/2022/05/03/tremor-tremors"},nextItem:{title:"Connectors for Streaming to AWS S3",permalink:"/blog/2021/12/04/LFX-Blog-Daksh"}},d={image:r(52630).A,authorsImageUrls:[void 0]},p=[{value:"Context",id:"context",level:2},{value:"Setting up Tremor and Redpanda",id:"setting-up-tremor-and-redpanda",level:2}],m={toc:p},l="wrapper";function c(e){let{components:a,...n}=e;return(0,o.yg)(l,(0,t.A)({},m,n,{components:a,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Like all good projects in the open source community, great collaborations start with ad hoc interactions."),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Redpanda Rocket",src:r(52630).A,width:"2000",height:"1403"})),(0,o.yg)("p",null,"A recent set of discussions between the Tremor maintainers and our community brought ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda")," to our attention."),(0,o.yg)("p",null,"Some of our community would like to replace their Kafka deployments with ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda"),", a Kafka API-compatible streaming\ndata platform, to realize gains in performance and reduce their total cost of operations. . As we already have Kafka\nconnectivity, enabling this shouldn\u2019t be too complex, right? Let\u2019s find out."),(0,o.yg)("h2",{id:"context"},"Context"),(0,o.yg)("p",null,"We are always looking out for interesting technology, and recently we read a ",(0,o.yg)("a",{parentName:"p",href:"https://vectorized.io/blog/wasm-architecture/"},"very interesting article")," on the Redpanda\nblog about using WASM as server-side filters for subscription. Being as excitable as we are, we obviously had to give\nRedpanda a shot."),(0,o.yg)("p",null,"To our joy this turned out to be painless, Redpanda reuses the Kafka API so our existing connectors for Kafka work\nout of the box \u2014 and as a bonus we could get rid of a whole bunch of docker-compose YAML dancing that we needed to\nset up Zookeeper."),(0,o.yg)("p",null,"Alex Gallego, founder of Redpanda, reached out to us and we started experimenting with Tremor and Redpanda in this\nrepo: ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/tremor-rs/tremor-redpanda"},"github.com/tremor-rs/tremor-redpanda")),(0,o.yg)("h2",{id:"setting-up-tremor-and-redpanda"},"Setting up Tremor and Redpanda"),(0,o.yg)("p",null,"So, let\u2019s get our hands dirty and actually connect Redpanda and tremor in a real-world project."),(0,o.yg)("p",null,"We have prepared a fully equipped workshop for this occasion. Give it a shot ",(0,o.yg)("a",{parentName:"p",href:"https://www.tremor.rs/docs/0.11/recipes/redpanda_elastic_correlation/README"},"here"),"\nif you are impatient."),(0,o.yg)("p",null,"Tremor can flexibly act as a Redpanda/Kafka consumer or producer, make use of auto-commit for offset management or manually commit\nwhen events are completely handled by the tremor pipeline. Here we are configuring Tremor only committing offsets when events have been successfully handled."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-yaml"},"onramp:\n  - id: redpanda-in\n    type: kafka\n    codec: json\n    config:\n      brokers:\n        - redpanda:9092\n      topics:\n        - tremor\n      group_id: redpanda_es_correlation\n      retry_failed_events: false\n      rdkafka_options:\n        enable.auto.commit: false\n")),(0,o.yg)("p",null,"This tremor application is reporting success or failure of ingesting the received events into elasticsearch via another Redpanda topic.\nConfiguring this is also straightforward, here we have a ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda")," consumer ready for copy-pasting:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-yaml"},"offramp:\n  - id: redpanda-out\n    type: kafka\n    codec: json\n    config:\n      group_id: tremor-in\n      brokers:\n        - redpanda:9092\n      topic: tremor\n")),(0,o.yg)("p",null,"Here you go. A fully working setup for orchestrating document ingestion with ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda")," delivering the documents and receiving acknowledgements.\nFor more details check out this Redpanda ",(0,o.yg)("a",{parentName:"p",href:"/docs/0.11/recipes/redpanda_elastic_correlation"},"recipe")," on our website."),(0,o.yg)("p",null,"Tremor is designed to be robust when faced with high volumetric data streams. It comes with batteries included for traffic shaping,\nQoS and data distribution. With those tremor can guarantee at-least-once message delivery. We try to reduce CPU and memory footprint\nfor a given workload and at the same time provide a \u201cjust works\u201d experience for operators. And we think we found a soulmate project in ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda"),"."),(0,o.yg)("p",null,"And most importantly, it is working like a charm. In fact we just dropped in ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda")," and expected some hours of troubleshooting, but this hope\nwas cut short by a smooth transition:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-bash"},'104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.828694200+00:00 INFO tremor_runtime::system - Binding onramp tremor://localhost/onramp/redpanda-in/01/out\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.830056300+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Starting kafka onramp\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.831848100+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Subscribing to: ["tremor"]\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.832735600+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Subscription initiated...\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.833342+00:00 INFO tremor_runtime::onramp - Onramp tremor://localhost/onramp/redpanda-in/01/out started.\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.828694200+00:00 INFO tremor_runtime::system - Binding onramp tremor://localhost/onramp/redpanda-in/01/out\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.830056300+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Starting kafka onramp\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.831848100+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Subscribing to: ["tremor"]\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.832735600+00:00 INFO tremor_runtime::source::kafka - [Source::tremor://localhost/onramp/redpanda-in/01/out] Subscription initiated...\n104_redpanda_elastic_correlation-tremor_out-1     | 2021-12-10T15:17:01.833342+00:00 INFO tremor_runtime::onramp - Onramp tremor://localhost/onramp/redpanda-in/01/out started.\n...\n')),(0,o.yg)("p",null,"Both in terms of operator friendliness and performance we root for ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda"),"."),(0,o.yg)("p",null,"We started using it in our integration test suite, so users can be 100% sure ",(0,o.yg)("a",{parentName:"p",href:"https://redpanda.com/"},"Redpanda")," connectivity just works."))}c.isMDXComponent=!0},52630:(e,a,r)=>{r.d(a,{A:()=>t});const t=r.p+"assets/images/redpanda-rocket-0282422a2035a2f4d294d7ce8fe8f473.png"}}]);