"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[7254],{60701:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var o=n(58168),r=(n(96540),n(15680));n(40281);const a={sidebar_label:"gpubsub_producer (Google Pub/Sub)",sidebar_position:1},i="The gpubsub_producer Connector",l={unversionedId:"reference/connectors/gpubsub_producer",id:"version-0.12/reference/connectors/gpubsub_producer",title:"The gpubsub_producer Connector",description:"This connector allows producing to a Google PubSub queue.",source:"@site/versioned_docs/version-0.12/reference/connectors/gpubsub_producer.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/gpubsub_producer",permalink:"/docs/0.12/reference/connectors/gpubsub_producer",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/connectors/gpubsub_producer.md",tags:[],version:"0.12",sidebarPosition:1,frontMatter:{sidebar_label:"gpubsub_producer (Google Pub/Sub)",sidebar_position:1},sidebar:"indexSidebar",previous:{title:"gpubsub_consumer (Google Pub/Sub)",permalink:"/docs/0.12/reference/connectors/gpubsub_consumer"},next:{title:"http",permalink:"/docs/0.12/reference/connectors/http"}},u={},s=[{value:"Configuration",id:"configuration",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Payload structure",id:"payload-structure",level:2}],p={toc:s},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.yg)(c,(0,o.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"the-gpubsub_producer-connector"},"The ",(0,r.yg)("inlineCode",{parentName:"h1"},"gpubsub_producer")," Connector"),(0,r.yg)("p",null,"This connector allows producing to a Google PubSub queue."),(0,r.yg)("h2",{id:"configuration"},"Configuration"),(0,r.yg)("p",null,"The credentials must be provided in a JSON file. The path to the JSON file should be set as an environment variable called ",(0,r.yg)("inlineCode",{parentName:"p"},"GOOGLE_APPLICATION_CREDENTIALS"),". If the application is running on Google Cloud, the token will be loaded from the environment."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tremor",metastring:'title="config.troy"',title:'"config.troy"'},'define flow gbqtest\nflow\n    use std;\n    \n    define pipeline passthrough\n    pipeline\n        select event from in into out;\n    end;\n\n    define connector metro from metronome\n    with\n        config = {"interval": 1000}\n    end;\n\n    define connector gpub from gpubsub_producer\n    with\n        codec = "json",\n        config = {\n            "topic": "projects/xxx/topics/test-topic-a", # required - the identifier of the topic\n            "connect_timeout": std::time::nanos::from_seconds(1), # optional - connection timeout (nanoseconds) - defaults to 10s\n            "request_timeout": std::time::nanos::from_seconds(10), # optional - timeout for each request (nanoseconds) - defaults to 1s \n            "endpoint":  "https://us-east1-pubsub.googleapis.com" # optional - the endpoint for the PubSub API, defaults to https://pubsub.googleapis.com\n        }\n    end;\n\n    create connector gpub;\n    create connector metro;\n\n    create pipeline passthrough;\n\n    connect /connector/metro/out to /pipeline/passthrough;\n    connect /pipeline/passthrough to /connector/gpub/in;\nend;\n\ndeploy flow gbqtest;\n')),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"option"),(0,r.yg)("th",{parentName:"tr",align:null},"required?"),(0,r.yg)("th",{parentName:"tr",align:null},"description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"topic"),(0,r.yg)("td",{parentName:"tr",align:null},"yes"),(0,r.yg)("td",{parentName:"tr",align:null},"The identifier of the topic, in the format of ",(0,r.yg)("inlineCode",{parentName:"td"},"projects/PROJECT_NAME/topics/TOPIC_NAME"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"connect_timeout"),(0,r.yg)("td",{parentName:"tr",align:null},"no"),(0,r.yg)("td",{parentName:"tr",align:null},"Connection timeout in nanoseconds")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"request_timeout"),(0,r.yg)("td",{parentName:"tr",align:null},"no"),(0,r.yg)("td",{parentName:"tr",align:null},"Request timeout in nanoseconds")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"endpoint"),(0,r.yg)("td",{parentName:"tr",align:null},"no"),(0,r.yg)("td",{parentName:"tr",align:null},"The endpoint for the PubSub API")))),(0,r.yg)("h2",{id:"metadata"},"Metadata"),(0,r.yg)("p",null,"The connector will use the ",(0,r.yg)("inlineCode",{parentName:"p"},"$gpubsub_producer")," metadata variable, which can be used to set the ",(0,r.yg)("inlineCode",{parentName:"p"},"ordering_key"),"."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"field"),(0,r.yg)("th",{parentName:"tr",align:null},"type"),(0,r.yg)("th",{parentName:"tr",align:null},"description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"ordering_key"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"The ordering key of the message")))),(0,r.yg)("h2",{id:"payload-structure"},"Payload structure"),(0,r.yg)("p",null,"The raw payload will be passed as is to the codec"))}d.isMDXComponent=!0}}]);