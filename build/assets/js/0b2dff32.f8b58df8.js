"use strict";(self.webpackChunktremor_website=self.webpackChunktremor_website||[]).push([[4620],{7640:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=t(58168),o=(t(96540),t(15680));t(40281);const a={},i="qos::percentile",s={unversionedId:"reference/operators/percentile",id:"version-0.12/reference/operators/percentile",title:"qos::percentile",description:"An alternative traffic shaping option to backpressure. Instead of all dropping events for a given",source:"@site/versioned_docs/version-0.12/reference/operators/percentile.md",sourceDirName:"reference/operators",slug:"/reference/operators/percentile",permalink:"/docs/0.12/reference/operators/percentile",draft:!1,editUrl:"https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/reference/operators/percentile.md",tags:[],version:"0.12",frontMatter:{},sidebar:"indexSidebar",previous:{title:"debug::history",permalink:"/docs/0.12/reference/operators/history"},next:{title:"qos::roundrobin",permalink:"/docs/0.12/reference/operators/roundrobin"}},l={},p=[],d={toc:p},c="wrapper";function u(e){let{components:n,...t}=e;return(0,o.yg)(c,(0,r.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"qospercentile"},"qos::percentile"),(0,o.yg)("p",null,"An alternative traffic shaping option to backpressure. Instead of all dropping events for a given\ntime we drop a statistical subset with an increasing percentage of events dropped the longer we\nsee errors / timeouts."),(0,o.yg)("p",null,"In general ",(0,o.yg)("inlineCode",{parentName:"p"},"step_up")," should always be significantly smaller then ",(0,o.yg)("inlineCode",{parentName:"p"},"step_down")," to ensure we gradually\nreapproach the ideal state."),(0,o.yg)("p",null,"This operator preserves event metadata."),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Configuration options"),":"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"timeout")," - Maximum allowed 'write' time in nanoseconds."),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"step_down")," - What additional percentile should be dropped in the case of a timeout (default 5%: ",(0,o.yg)("inlineCode",{parentName:"li"},"0.05"),")"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"step_up")," - What percentile should be recovered in case of a good event. (default: 0.1%: ",(0,o.yg)("inlineCode",{parentName:"li"},"0.001"),")")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Outputs"),":"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"out")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"overflow")," - Events that are not let past due to active backpressure")),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"},"Example"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-tremor"},"use std::time::nanos;\n\ndefine operator perc from qos::percentile\nwith\n  timeout = nanos::from_millis(100),\n  step_down = 0.1 # 10%\nend;\n")))}u.isMDXComponent=!0}}]);