<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-0.12 plugin-docs plugin-id-default docs-doc-id-language/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Language | Tremor</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.tremor.rs/docs/0.12/language/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.12"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.12"><meta data-rh="true" name="docsearch:version" content="0.12"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.12"><meta data-rh="true" property="og:title" content="Language | Tremor"><meta data-rh="true" name="description" content="Tremor provides a scripting language for defining and deploying event flows."><meta data-rh="true" property="og:description" content="Tremor provides a scripting language for defining and deploying event flows."><link data-rh="true" rel="icon" href="/static/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.tremor.rs/docs/0.12/language/"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/docs/0.12/language/" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.tremor.rs/docs/0.12/language/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tremor RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tremor Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8fde9d3c.css">
<link rel="preload" href="/assets/js/runtime~main.0a24082e.js" as="script">
<link rel="preload" href="/assets/js/main.fe542851.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.tremor.rs/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/tremor-logo.svg" alt="Tremor Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/0.12/getting-started/">Getting Started</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" positition="left" href="/docs/0.12">Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.12/guides/">Guides</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.12/reference/">Reference Documentation</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.12/">0.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/edge/">edge</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.12/language/">0.12</a></li><li><a class="dropdown__link" href="/docs/0.11/">0.11</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tremor-rs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-0.12,docs-rfc-current"></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12/">Tremor</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.12/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.12/guides/">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.12/concepts/aggregation">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/0.12/reference/">Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12/api/">API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" href="/docs/0.12/language/">Language</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/pipelines">Pipelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/scripts">Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/expressions">Expressions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/0.12/language/reference/">Grammar</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grammar&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/common_patterns">Common Patterns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.12/language/history">History</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/0.12/operations/api-usage">Operations</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/benchmarks">Benchmarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/0.12/api/">Api</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Language</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.12</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Language</h1><p>Tremor provides a scripting language for defining and deploying event flows.
It is called <!-- -->[Troy]<!-- --> - The Tremor Deployment language.</p><ul><li><a href="/docs/0.12/reference/connectors">Connectors</a> providing connectivity to the outside world, </li><li><a href="/docs/0.12/language/pipelines">Pipelines</a> representing the actual stream processing and event handling </li><li>and the Connections of both, forming a complete and self-contained Flow of Events.</li></ul><p>Troy is used on every level of event processing, starting from the plumbing that provides connectivity to the outside world in the form of a <a href="#flows">Flow</a>, ranging over <a href="/docs/0.12/language/pipelines">Pipelines</a> and <a href="/docs/0.12/language/scripts">Scripts</a> for expressing complex event routing, filtering, event introspection and transformation, towards the final step of deploying your application and bringing it to production via <a href="#deploy">Deploy</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flows">Flows<a href="#flows" class="hash-link" aria-label="Direct link to Flows" title="Direct link to Flows">​</a></h2><p>A Flow encapsulates your event flow: the definition of where events should come from, how you want to handle, route, slice and dice them and where to they are sent out: The physical routing, or as we call it, the plumbing. This is where you get your hands dirty and greasy. It is also the unit of Deployment in Tremor. You bring a whole Flow live by <a href="#deploy">Deploy</a>ing it. Any Tremor server can host many Flows in parallel. You can deploy multiple versions of your Flow to increase parallelism (e.g. have multiple consumers consumer from your kafka topic and send the events downstream after normalizing them to a common format).</p><p>Flows are self-contained, sealed units and cannot communicate with each other. Thus users usually want to encapsulate their application in a single Flow and put unrelated event flows in separate <a href="#flows">Flows</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition">Definition<a href="#definition" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h3><p>As all other entities in Tremor, <a href="#flows">Flows</a> need to be defined:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">define flow flowy_mc_flowface</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    url = &quot;localhost:12345&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">flow</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # import some predefined pipelines</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    use tremor::pipelines;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # lets define a connector and parameterize it by the url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    define connector my_udp from udp_server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;url&quot;: args.url # pass on the url from the arguments</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        codec = &quot;json&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # create an instance from the pipeline definitions imported above</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create pipeline passthrough from pipelines::passthrough;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # create a connector instance and pass through the url argument from the flow definition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create connector my_udp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        url = args.url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # let the events flow from conny through passthrough and then back to my_udp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    connect /connector/my_udp to /pipeline/passthrough;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    connect /pipeline/passthrough to /connector/my_udp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we have all the bits and pieces that comprise a full fledged Tremor Application:</p><ul><li>We define where events should come from by defining a connector. In this case we receive events from UDP packets and interpret them as JSON.</li><li>We define how to handle events. In this case we just want to pass them through unchanged, so we use a predefined <code>passthrough</code> pipeline.</li><li>We define the final event flow by using the <a href="/docs/0.12/language/reference/deploy#rule-connect"><code>connect</code></a> statements to route events from our connector <code>conny</code> through our passthrough pipeline <code>pippi</code> and back to our <code>udp_server</code> connector. We essentially formed a UDP echo server.</li></ul><p>This definition will also make the <a href="#flows">Flow</a> with the id <code>flowy_mc_flowface</code> available for <a href="#deploy">Deploy</a>ing it in order to bring it to live and let the events flow through it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy">Deploy<a href="#deploy" class="hash-link" aria-label="Direct link to Deploy" title="Direct link to Deploy">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>It is important to know that a <a href="#define-and-create"><code>define</code></a> will never start or deploy anything, it will only create a configuration template that can be <a href="#define-and-create"><code>created</code></a>.</p><p>So don&#x27;t forget to <!-- -->[<code>deploy</code>]<!-- --> your flow!</p></div></div><p>How to actually deploy this flow, you might ask? Wait no longer, your thirst for answer will be satisfied:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">deploy flow flowy_mc_flowface;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This statement will deploy an instance of <code>flowy_mc_flowface</code> and bring it live with the provided port. You can deploy multiple different <code>flowy_mc_flowface</code> Flows with different settings provided as parameters in the <code>with</code> clause. Your Flow acts as a configurable template. For more details, see <a href="#arguments">Arguments</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pipelines">Pipelines<a href="#pipelines" class="hash-link" aria-label="Direct link to Pipelines" title="Direct link to Pipelines">​</a></h2><p>In the above <a href="#flows">Flow</a> we used a very simple <code>passthrough</code> pipeline, as we didn&#x27;t want to modify the events we got in in any form.
The thing is, usually you do. Or you want to inspect them and route them based on their log-level, for example, or just drop them because you just got too much events from the upstream system. This is what pipelines are for.</p><p>Pipelines are self-contained units that define your application logic, the logical routing. It is usually independent of where the input events come from and go to. As with all entities in Tremor, <a href="/docs/0.12/language/pipelines">Pipelines</a> need to be defined and created. They also need to be <a href="/docs/0.12/language/reference/deploy#rule-connect"><code>connect</code></a>ed to have events flow through them. This is all done inside a <a href="#flows">Flow</a>, as we have seen in action above.</p><p>Pipelines have input (<code>in</code>) and output (<code>out</code>, <code>err</code>) ports, which can be configured upon definition. All events come from one of the configured input ports. Every pipelines actually forms a graph (a directed acyclic graph) with edges spanning from the input ports to operators and finally to the output ports. Events flow along the edges and are processed by the operators.</p><p><a href="/docs/0.12/language/pipelines#select-queries">Select</a> statements are what connects the input/output ports and the processing operators. As the name suggests, they are similar to the <code>SQL SELECT</code>. They support filtering out events by a <a href="/docs/0.12/language/reference/query#rule-whereclause"><code>where</code></a> clause,  </p><p>The simplest kind of pipeline is the passthrough pipeline we used above:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">define pipeline passthrough</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipeline</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    select event from in into out;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="mermaid" data-mermaid-src="graph LR
IN([in]) --&gt; OUT([out])">graph LR
IN([in]) --&gt; OUT([out])</div><p>Lets add an operator in the middle and only send those events through it that have a <code>log_level</code> field with the value <code>&quot;info&quot;</code>:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">define pipeline passthrough</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipeline</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # define the operator - here we batch events up in groups of 100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    define operator batch from generic::batch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        count = 100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # create an instance of the operator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create operator my_batch from batch;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # select the log_level = &quot;info&quot; events into the batch operator and into the out port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    select event from in where event.log_level == &quot;info&quot; into my_batch;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    select event from my_batch into out;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # pass through all the others</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    select event from in where event.log_level != &quot;info&quot; into out;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="mermaid" data-mermaid-src="graph LR
IN([in]) --&gt;|&quot;event.log_level == \&quot;info\&quot;&quot;| BATCH([my_batch]) --&gt; OUT([out])
IN --&gt;|&quot;event.log_level != \&quot;info\&quot;&quot;| OUT">graph LR
IN([in]) --&gt;|&quot;event.log_level == \&quot;info\&quot;&quot;| BATCH([my_batch]) --&gt; OUT([out])
IN --&gt;|&quot;event.log_level != \&quot;info\&quot;&quot;| OUT</div><p>This looks more interesting, doesn&#x27;t it? We defined and created an operator, which now forms a node in out event processing graph. We used the <a href="/docs/0.12/language/pipelines#select-queries">Select</a> statements to route only certain events into the operator, all others go straight to the <code>out</code> port and leave the pipeline.</p><p>This is the basic structure of a Pipeline. The basic concepts you need to understand to work with them. For more details check out our <a href="/docs/0.12/language/pipelines">Pipeline</a> article.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operators">Operators<a href="#operators" class="hash-link" aria-label="Direct link to Operators" title="Direct link to Operators">​</a></h3><p>Operators are the nodes in a Pipeline graph, connected by <a href="/docs/0.12/language/pipelines#select-queries">Select</a> statements. Similar to <a href="/docs/0.12/language/pipelines">Pipelines</a>, Operators have ports for connecting them to other operators or pipeline input/output ports. The default ports are <code>in</code> for input and <code>out</code> for output and <code>err</code> for erroneous output. Some Operators have custom ports. To find out which, check the <a href="/docs/0.12/reference/operators/">Documentation</a>.</p><p>They can keep internal state between events flowing through them, which makes them quite powerful.</p><p>Tremor provides a list of builtin <a href="/docs/0.12/reference/operators">Operators</a>. E.g. for <a href="/docs/0.12/reference/operators/batch"><code>generic::batch</code></a> for batching up events or <a href="/docs/0.12/reference/operators/backpressure"><code>qos::backpressure</code></a> for applying backpressure towards upstream systems if a downstream system fails or takes to long to handle events.</p><p>If you want to create your own custom operator, you can use a <a href="/docs/0.12/language/scripts">Script</a>, which is handled in the next section.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="scripts">Scripts<a href="#scripts" class="hash-link" aria-label="Direct link to Scripts" title="Direct link to Scripts">​</a></h2><p>Scripts are a special kind of Operator. While others are simply configured and perform their event-processing in optimized Rust code, Scripts execute your Tremor code. They also have a special syntax:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">define script my_script</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">script</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let value = </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      match event of</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        case %{ present snot } =&gt; &quot;badger&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        case &quot;stringy&quot; =&gt; &quot;string&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        case 42 =&gt; &quot;the answer&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    emit {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;original_event&quot;: event,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;derived_value&quot;: value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">create script my_script;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This script inspects the event and derives a value depending on the type and shape of the event. It then emits a transformed value containing the original event and the derived value as the outgoing event.</p><p>Scripts give users the most control over how to inspect, filter and transform an event. With their <a href="/docs/0.12/language/expressions#state">state</a> mechanism, they can also work on streams of events (e.g. for creating aggregates or implementing state machines).</p><p>So, if you want to implement some complex ETL logic on your event streams, if you want to manipulate event metadata or implement other more complex logic than is expressable in a <a href="/docs/0.12/language/pipelines#select-queries">Select</a> statement, a <a href="/docs/0.12/language/scripts">Script</a> should be your tool of choice.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h2><p>So what exactly is this event thing that is routed from <a href="/docs/0.12/reference/connectors">Connectors</a> through pipelines and processed in and emitted from scripts?</p><p>An event is a discrete unit of an event stream. An incoming raw data stream is separated into distinct byte chunks either by the <a href="/docs/0.12/reference/connectors">Connector</a> itself (e.g. in the case of UDP, each packet will be treated as distinct unit) or by <a href="/docs/0.12/reference/preprocessors">Preprocessors</a> configured on the input <a href="/docs/0.12/reference/connectors">Connector</a>. Then the configured <a href="/docs/0.12/reference/codecs">Codec</a> is decoding the byte chunk into the structured event payload.</p><p>Each event consists of:</p><ul><li>payload (accessible via the reserved <a href="/docs/0.12/language/expressions#reserved-paths"><code>event</code> path</a></li><li>event metadata, initially added by the <a href="/docs/0.12/reference/connectors">Connector</a> this event originated at, accessible via the reserved <a href="/docs/0.12/language/expressions#reserved-paths"><code>$</code> path</a> modifiable by <a href="/docs/0.12/language/scripts">Scripts</a> </li><li>an event id, for uniquely identifying the event inside the system</li><li>an <a href="/docs/0.12/reference/stdlib/tremor/system#ingestns">ingestion timestamp</a> in nanosecond resolution</li><li>an <a href="/docs/0.12/reference/stdlib/tremor/origin"><code>origin_uri</code></a> for identifying the event origin (e.g. a TCP connection peer)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-system">Type system<a href="#type-system" class="hash-link" aria-label="Direct link to Type system" title="Direct link to Type system">​</a></h2><p>All values in Tremor, be it event payload, metadata, local variables, state or anything else, everything is a part of the Tremor type system. The type system is roughly modelled to support all values that can be represented as JSON, with some extensions.</p><p>Tremor is dynamically typed, that means variables do not have a static type determined at compile time. But they can have any possible type. Treating values as different types than they actually are will lead to errors. E.g. accessing a nested field on a value that is actually a string.</p><p>Possible types for tremor values are:</p><ul><li><a href="/docs/0.12/language/expressions#null"><code>null</code></a> - represents a JSON <code>null</code>, an otherwise undefined value</li><li><a href="/docs/0.12/language/expressions#boolean">booleans</a> - <code>true</code> and <code>false</code></li><li><a href="/docs/0.12/language/expressions#integer-numerics">integers</a> - integers</li><li><a href="/docs/0.12/language/expressions#floating-point-numerics">floats</a> - floating point numbers</li><li><a href="/docs/0.12/language/expressions#utf-8-encoded-strings">strings</a> - UTF-8 encoded strings</li><li><a href="/docs/0.12/language/expressions#arrays">arrays</a> - arrays of arbitrarily typed values, also different types</li><li><a href="/docs/0.12/language/expressions#records">records</a> - mappings from string names to arbitrarily typed values</li><li><a href="/docs/0.12/language/expressions#binary">binary</a> - raw binary data</li></ul><p>To check for the type of a value, use either a function in the <a href="/docs/0.12/reference/stdlib/std/type"><code>std::type</code> module</a> or some of the modules for handling specific types, like integers: <a href="/docs/0.12/reference/stdlib/std/integer">std::integer</a> inside a <a href="/docs/0.12/language/expressions#match">match</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-and-create">Define and Create<a href="#define-and-create" class="hash-link" aria-label="Direct link to Define and Create" title="Direct link to Define and Create">​</a></h2><p>We tried to keep the language as consistent and free of surprises as possible. As such, all entities in Tremor: <a href="#flows">Flows</a>, <a href="/docs/0.12/reference/connectors">Connectors</a>, <a href="/docs/0.12/language/pipelines">Pipelines</a>, <a href="/docs/0.12/reference/operators">Operators</a>, <a href="/docs/0.12/language/scripts">Scripts</a> and others, all follow the same pattern: <strong>Define and Create</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="define">Define<a href="#define" class="hash-link" aria-label="Direct link to Define" title="Direct link to Define">​</a></h3><p>If you want to use an entity, you first have to define it, providing configuration, actual code etc. The Definition Step never creates an instance or somehow affect the runtime, it just makes the preconfigured definition available for creating as many instances from it as you might want.</p><p>The most important aspect of the split of <code>define</code> and <code>create</code> is to enable modularity of your code base. <code>defines</code> can live in a separate file. You can group regularly used pipelines, scripts or connectors in separate files, and dont repeat yourself too much by reusing recurring bits of your code.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create">Create<a href="#create" class="hash-link" aria-label="Direct link to Create" title="Direct link to Create">​</a></h3><p>The Create step actually creates a runtime instance of the defined entity, with the configuration provided at the Definition step and with the <a href="#arguments">Arguments</a> provided with the create statement.</p><p>Created operators and scripts (actually also an operator) can be referenced by <a href="/docs/0.12/language/pipelines#select-queries">Select</a> statements in a pipeline and thus can become part of the <a href="/docs/0.12/language/pipelines">Pipeline</a> graph.</p><p>Created <a href="/docs/0.12/reference/connectors">Connectors</a> and <a href="/docs/0.12/language/pipelines">Pipelines</a> can be referenced in <a href="/docs/0.12/language/reference/deploy#rule-connec">Connect</a> statements and so become part of the event flow that actually routes incoming events towards pipelines and outgoing connectors.</p><p>One special case are <a href="#flows">Flows</a>. They are not created, but <a href="#deploy">Deploy</a>ed. This is because deploying a <a href="#flows">Flow</a> is also starting all the contained instances of the flow, so the operation is somewhat different and required a different name.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="modules">Modules<a href="#modules" class="hash-link" aria-label="Direct link to Modules" title="Direct link to Modules">​</a></h2><p>Troy is built to enable modularization. Instead of cramming all your applications code into a huge single file, you can extract your preconfigured <a href="/docs/0.12/reference/connectors">Connector</a> definitions or even a full-grown <a href="#flows">Flow</a> (or anything you can define in Troy) into separate files and simply <a href="/docs/0.12/language/reference/deploy#rule-use"><code>use</code></a> in your applications main Troy file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">main.troy</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># importing the module `my_flows` from `my_flows.tremor`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># making its definitions available in this file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">use my_flows;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># refer to a flow defined the `my_flows` module and deploy it</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deploy flow cool_flow_01 from my_flows::cool_flow;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">my_flows.tremor</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">define flow cool_flow</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">flow</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # make the `pipelines` module within the `troy` namespace available.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    use tremor::pipelines;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # make the `connectors` module within the `troy` namespace available.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    use tremor::connectors;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # refer to the definition of `console` inside the `connectors` module</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create connector my_console from connectors::console;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # refer to the definition of `passthrough` inside the `pipelines` module</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create pipeline my_passthrough from pipelines::passthrough;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    connect /connector/my_console to /pipeline/my_passthrough;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    connect /pipeline/my_passthrough to /connector/my_console;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we put the actual <a href="#flows">Flow</a> definition in a separate file <code>my_flows.tremor</code> and <a href="/docs/0.12/language/reference/deploy#rule-use"><code>use</code></a>d it in our main Troy file.</p><p>Even more interestingly, within our <code>my_flows.tremor</code> file, we made good use of predefined <a href="/docs/0.12/reference/connectors">Connectors</a> and <a href="/docs/0.12/language/pipelines">Pipelines</a> within the <a href="/docs/0.12/reference/stdlib">Standard Library</a> modules <a href="/docs/0.12/reference/stdlib/tremor/pipelines"><code>tremor::pipelines</code></a> and <a href="/docs/0.12/reference/stdlib/tremor/connectors"><code>tremor::connectors</code></a>. All standard library modules are available for <code>use</code> by default.</p><p>It is also important to note that you can use <code>use</code> statements on all levels of your code. In the top level, in a <a href="#flows">Flow</a> definition, a <a href="/docs/0.12/language/pipelines">Pipeline</a> definition or a <a href="/docs/0.12/language/scripts">Script</a> operator definition. A <code>use</code> statement on an outer scope, say inside a <a href="#flows">Flow</a> definition, like above, will not be available on an inner scope, say a <a href="/docs/0.12/language/pipelines">Pipeline</a> definition. <code>use</code> statements only make the definition of modules available in the current scope.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tremor_path">TREMOR_PATH<a href="#tremor_path" class="hash-link" aria-label="Direct link to TREMOR_PATH" title="Direct link to TREMOR_PATH">​</a></h3><p>Tremor modules you want to <code>use</code>, need to be available on a path listed in the environment variable <code>$TREMOR_PATH</code>.
It follows the same format as the well known <code>$PATH</code> variable. It should contain 0 or more directories, separated by a colon (<code>:</code>).</p><p>Getting back to the example above: If you want to <code>use</code> the <code>my_flows.tremor</code> file, its directory needs to be present in <code>$TREMOR_PATH</code> and provided to the <code>tremor</code> executable on startup.</p><p>An example command line to start tremor with the files above, assuming <code>my_flows.tremor</code> is in the <code>$HOME/modules</code> directory, would be:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ TREMOR_PATH=&quot;${TREMOR_PATH}:${HOME}/modules tremor server run main.troy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="arguments">Arguments<a href="#arguments" class="hash-link" aria-label="Direct link to Arguments" title="Direct link to Arguments">​</a></h2><p>All Tremor entities have a define step, at which they can define arguments, they require upon creation (or upon <code>deploy</code>). The syntax for this is illustrated by the following example:</p><div class="language-tremor codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tremor codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">define flow with_args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    url = &quot;localhost:12345&quot;,    # optional argument with default value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    codec                       # required argument</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">flow</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    define connector conn_with_args from udp_server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        url,                    # required argument</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        codec                   # required argument</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;url&quot;: args.url</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        codec = args.codec</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    create connector conn_with_args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        url = args.url,         # the value from the flow args are passed through to the connector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        codec = args.codec      # the same happens here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # ... the rest redacted for the sake of brevity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deploy flow with_args</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    codec = &quot;json&quot;              # we need to provide the required arguments</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Arguments are defined after the <code>args</code> keyword. It is possible to define required arguments, by omitting a default value, and optional arguments, by providing a default value.</p><p>Parameter values are provided on <code>create</code> or <code>deploy</code> statements after the <code>with</code> keyword.</p><p>You can refer to arguments within the body of the entity having arguments defined by the special <code>args</code> path expression. It is not possible to refer to <code>args</code> from the outer scope. E.g. inside a script we cannot reference the <code>args</code> of the outer <a href="/docs/0.12/language/pipelines">Pipeline</a> or outer <a href="#flows">Flow</a>, only the own <code>args</code> can be referenced.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/tremor-rs/tremor-www/tree/main/versioned_docs/version-0.12/language/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.12/api/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">index</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.12/language/pipelines"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pipelines</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#flows" class="table-of-contents__link toc-highlight">Flows</a><ul><li><a href="#definition" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#deploy" class="table-of-contents__link toc-highlight">Deploy</a></li></ul></li><li><a href="#pipelines" class="table-of-contents__link toc-highlight">Pipelines</a><ul><li><a href="#operators" class="table-of-contents__link toc-highlight">Operators</a></li></ul></li><li><a href="#scripts" class="table-of-contents__link toc-highlight">Scripts</a></li><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li><li><a href="#type-system" class="table-of-contents__link toc-highlight">Type system</a></li><li><a href="#define-and-create" class="table-of-contents__link toc-highlight">Define and Create</a><ul><li><a href="#define" class="table-of-contents__link toc-highlight">Define</a></li><li><a href="#create" class="table-of-contents__link toc-highlight">Create</a></li></ul></li><li><a href="#modules" class="table-of-contents__link toc-highlight">Modules</a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li><li><a href="#tremor_path" class="table-of-contents__link toc-highlight">TREMOR_PATH</a></li></ul></li><li><a href="#arguments" class="table-of-contents__link toc-highlight">Arguments</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.tremor.rs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/TremorDEBS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UCg1hxwEjh9szpYg8SxL0U7Q" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
          Copyright © 2025, Tremor Authors | Documentation Distributed under CC-BY-4.0.<br><br>
              <p style="font-size: smaller;">Hosted by: <a href="https://www.netlify.com/" rel="noreferrer noopener" aria-label="Netlify"><img src="/img/netlify-full-logo.svg" alt="CNCF" style="width: 3%;"></a>
              &nbsp;&nbsp;&nbsp;&nbsp;
              Project of: <a href="https://www.cncf.io/" rel="noreferrer noopener" aria-label="CNCF"><img src="/img/cncf-color.svg" alt="CNCF" style="width: 5%;"></a></p>
        <small>© 2025 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.</small>
        </div></div></div></footer></div>
<script src="/assets/js/runtime~main.0a24082e.js"></script>
<script src="/assets/js/main.fe542851.js"></script>
</body>
</html>